{"version":3,"sources":["../../../../../spicy-pnl/src/components/pnl/PLViewer.tsx","../../../../../spicy-pnl/src/components/pnl/SummaryCards.tsx","../../../../../spicy-pnl/src/lib/calculations.ts","../../../../../spicy-pnl/src/components/ui/ChevronIcon.tsx","../../../../../spicy-pnl/src/components/tagging/TagModal.tsx","../../../../../spicy-pnl/src/components/pnl/TransactionRow.tsx","../../../../../spicy-pnl/src/components/pnl/PLRow.tsx","../../../../../spicy-pnl/src/components/pnl/PLSection.tsx","../../../../../spicy-pnl/src/components/pnl/GrossProfitRow.tsx","../../../../../spicy-pnl/src/components/tagging/ExcludedSection.tsx"],"sourcesContent":["'use client';\n\nimport { usePL } from '@/context/PLContext';\nimport { SummaryCards } from './SummaryCards';\nimport { PLSection } from './PLSection';\nimport { GrossProfitRow } from './GrossProfitRow';\nimport { ExcludedSection } from '@/components/tagging/ExcludedSection';\n\nexport function PLViewer() {\n  const { state } = usePL();\n\n  if (state.loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"flex items-center gap-3 text-slate-500\">\n          <svg className=\"animate-spin h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <span>Loading financial data...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.error) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-red-600 bg-red-50 px-6 py-4 rounded-lg border border-red-200\">\n          <strong>Error:</strong> {state.error}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Summary Cards */}\n      <SummaryCards />\n\n      {/* Revenue Section */}\n      <PLSection\n        section=\"revenue\"\n        title=\"Revenue\"\n        colorClass=\"bg-emerald-500\"\n      />\n\n      {/* COGS Section */}\n      <PLSection\n        section=\"cogs\"\n        title=\"Cost of Goods Sold\"\n        colorClass=\"bg-orange-500\"\n      />\n\n      {/* Cost of Sales Section */}\n      <PLSection\n        section=\"costOfSales\"\n        title=\"Cost of Sales\"\n        colorClass=\"bg-amber-500\"\n      />\n\n      {/* Gross Profit */}\n      <GrossProfitRow type=\"grossProfit\" />\n\n      {/* Operating Expenses */}\n      <PLSection\n        section=\"operatingExpenses\"\n        title=\"Operating Expenses\"\n        colorClass=\"bg-red-500\"\n      />\n\n      {/* Net Income */}\n      <GrossProfitRow type=\"netIncome\" />\n\n      {/* Excluded/Tagged Section */}\n      <ExcludedSection />\n    </div>\n  );\n}\n","'use client';\n\nimport { useMemo } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { calculatePLSummary } from '@/lib/calculations';\nimport { formatCurrency } from '@/lib/csvParser';\n\nexport function SummaryCards() {\n  const { state } = usePL();\n\n  const summary = useMemo(() => {\n    if (state.transactions.length === 0) return null;\n    return calculatePLSummary(state.transactions, state.accounts, state.tags);\n  }, [state.transactions, state.accounts, state.tags]);\n\n  if (!summary) return null;\n\n  const cards = [\n    {\n      label: 'Net Revenue',\n      value: summary.netRevenue,\n      color: 'bg-emerald-50 border-emerald-200',\n      textColor: 'text-emerald-700',\n      valueColor: 'text-emerald-900'\n    },\n    {\n      label: 'Gross Profit',\n      value: summary.grossProfit,\n      subLabel: `${summary.grossMargin.toFixed(1)}% margin`,\n      color: 'bg-blue-50 border-blue-200',\n      textColor: 'text-blue-700',\n      valueColor: 'text-blue-900'\n    },\n    {\n      label: 'Net Income',\n      value: summary.netIncome,\n      subLabel: `${summary.netMargin.toFixed(1)}% margin`,\n      color: summary.netIncome >= 0 ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200',\n      textColor: summary.netIncome >= 0 ? 'text-green-700' : 'text-red-700',\n      valueColor: summary.netIncome >= 0 ? 'text-green-900' : 'text-red-900'\n    },\n    {\n      label: 'Tagged Items',\n      value: summary.taggedAmount,\n      subLabel: `${summary.taggedItemsCount} transactions`,\n      color: 'bg-amber-50 border-amber-200',\n      textColor: 'text-amber-700',\n      valueColor: 'text-amber-900'\n    }\n  ];\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n      {cards.map((card) => (\n        <div\n          key={card.label}\n          className={`${card.color} border rounded-lg p-4 shadow-sm`}\n        >\n          <div className={`text-sm font-medium ${card.textColor}`}>\n            {card.label}\n          </div>\n          <div className={`text-2xl font-bold ${card.valueColor} mt-1`}>\n            {formatCurrency(card.value)}\n          </div>\n          {card.subLabel && (\n            <div className={`text-xs ${card.textColor} mt-1 opacity-75`}>\n              {card.subLabel}\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n","import { Transaction, Account, PLRow, PLSummary, TransactionTag, PLSection } from '@/types';\n\n// Get all transactions for an account (including children)\nexport function getAccountTransactions(\n  accountCode: string,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  tags: Record<string, TransactionTag>,\n  includeTagged: boolean = false\n): Transaction[] {\n  const account = accounts.get(accountCode);\n  if (!account) return [];\n\n  // Get direct transactions\n  let result = transactions.filter(t => {\n    const matchesAccount = t.accountCode === accountCode ||\n      (t.parentAccountCode === accountCode && !accounts.has(t.accountCode));\n    const isTagged = tags[t.id] !== undefined;\n    return matchesAccount && (includeTagged || !isTagged);\n  });\n\n  // Add child account transactions\n  for (const childCode of account.children) {\n    result = result.concat(\n      getAccountTransactions(childCode, transactions, accounts, tags, includeTagged)\n    );\n  }\n\n  return result;\n}\n\n// Calculate monthly amounts for an account\nexport function calculateMonthlyAmounts(\n  accountCode: string,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  months: string[],\n  tags: Record<string, TransactionTag>\n): { monthlyAmounts: Record<string, number>; ytdTotal: number; transactionCount: number } {\n  const accountTransactions = getAccountTransactions(accountCode, transactions, accounts, tags);\n\n  const monthlyAmounts: Record<string, number> = {};\n  months.forEach(m => { monthlyAmounts[m] = 0; });\n\n  let ytdTotal = 0;\n\n  for (const txn of accountTransactions) {\n    if (txn.month && monthlyAmounts[txn.month] !== undefined) {\n      monthlyAmounts[txn.month] += txn.amount;\n      ytdTotal += txn.amount;\n    }\n  }\n\n  return { monthlyAmounts, ytdTotal, transactionCount: accountTransactions.length };\n}\n\n// Build P&L rows for a section\nexport function buildPLRows(\n  section: PLSection,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  months: string[],\n  tags: Record<string, TransactionTag>\n): PLRow[] {\n  const rows: PLRow[] = [];\n\n  // Get top-level accounts for this section\n  const topLevelAccounts = Array.from(accounts.values())\n    .filter(a => a.section === section && a.parentCode === null)\n    .sort((a, b) => a.code.localeCompare(b.code));\n\n  for (const account of topLevelAccounts) {\n    const { monthlyAmounts, ytdTotal, transactionCount } = calculateMonthlyAmounts(\n      account.code, transactions, accounts, months, tags\n    );\n\n    // Only add if there's activity\n    if (ytdTotal !== 0 || transactionCount > 0) {\n      rows.push({\n        accountCode: account.code,\n        account,\n        monthlyAmounts,\n        ytdTotal,\n        transactionCount\n      });\n    }\n  }\n\n  return rows;\n}\n\n// Calculate P&L summary metrics\nexport function calculatePLSummary(\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  tags: Record<string, TransactionTag>\n): PLSummary {\n  // Filter out tagged transactions\n  const activeTransactions = transactions.filter(t => !tags[t.id]);\n  const taggedTransactions = transactions.filter(t => tags[t.id]);\n\n  // Calculate by section\n  const bySection = (section: PLSection) =>\n    activeTransactions\n      .filter(t => {\n        const account = accounts.get(t.accountCode);\n        if (!account) return false;\n        // Check if this account or its parent matches the section\n        if (account.section === section) return true;\n        if (t.parentAccountCode) {\n          const parent = accounts.get(t.parentAccountCode);\n          if (parent?.section === section) return true;\n        }\n        return false;\n      })\n      .reduce((sum, t) => sum + t.amount, 0);\n\n  // Revenue breakdown\n  const revenueTransactions = activeTransactions.filter(t => {\n    const code = parseInt(t.accountCode, 10);\n    return code >= 4000 && code < 4100;\n  });\n\n  // Gross revenue (4000 Sales + 4030 Shipping)\n  const grossRevenue = revenueTransactions\n    .filter(t => t.accountCode === '4000' || t.accountCode === '4030')\n    .reduce((sum, t) => sum + t.amount, 0);\n\n  // Contra revenue (discounts, refunds, chargebacks - these are negative)\n  const contraRevenue = revenueTransactions\n    .filter(t => t.accountCode === '4010' || t.accountCode === '4020' || t.accountCode === '4040')\n    .reduce((sum, t) => sum + t.amount, 0);\n\n  const netRevenue = grossRevenue + contraRevenue;\n\n  // Cost sections\n  const totalCOGS = bySection('cogs');\n  const totalCostOfSales = bySection('costOfSales');\n  const totalOpEx = bySection('operatingExpenses');\n  const otherIncome = bySection('otherIncome');\n\n  // Calculated metrics\n  const grossProfit = netRevenue - totalCOGS - totalCostOfSales;\n  const grossMargin = netRevenue !== 0 ? (grossProfit / netRevenue) * 100 : 0;\n  const netIncome = grossProfit - totalOpEx + otherIncome;\n  const netMargin = netRevenue !== 0 ? (netIncome / netRevenue) * 100 : 0;\n\n  // Tagged items\n  const taggedAmount = taggedTransactions.reduce((sum, t) => sum + Math.abs(t.amount), 0);\n\n  return {\n    grossRevenue,\n    netRevenue,\n    totalCOGS,\n    totalCostOfSales,\n    grossProfit,\n    grossMargin,\n    totalOpEx,\n    otherIncome,\n    netIncome,\n    netMargin,\n    taggedItemsCount: taggedTransactions.length,\n    taggedAmount\n  };\n}\n\n// Group transactions by month\nexport function groupTransactionsByMonth(transactions: Transaction[]): Record<string, Transaction[]> {\n  const grouped: Record<string, Transaction[]> = {};\n\n  for (const txn of transactions) {\n    if (!grouped[txn.month]) {\n      grouped[txn.month] = [];\n    }\n    grouped[txn.month].push(txn);\n  }\n\n  // Sort transactions within each month by date\n  for (const month of Object.keys(grouped)) {\n    grouped[month].sort((a, b) => {\n      const dateA = new Date(a.transactionDate);\n      const dateB = new Date(b.transactionDate);\n      return dateA.getTime() - dateB.getTime();\n    });\n  }\n\n  return grouped;\n}\n\n// Get tagged transactions grouped by category and sub-account\nexport function getTaggedTransactionsGrouped(\n  transactions: Transaction[],\n  tags: Record<string, TransactionTag>\n): Record<string, Record<string, Transaction[]>> {\n  const result: Record<string, Record<string, Transaction[]>> = {\n    personal: {},\n    nonRecurring: {}\n  };\n\n  for (const txn of transactions) {\n    const tag = tags[txn.id];\n    if (!tag) continue;\n\n    if (!result[tag.category][tag.subAccount]) {\n      result[tag.category][tag.subAccount] = [];\n    }\n    result[tag.category][tag.subAccount].push(txn);\n  }\n\n  return result;\n}\n\n// Calculate section total for a month\nexport function calculateSectionMonthlyTotal(\n  section: PLSection,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  month: string,\n  tags: Record<string, TransactionTag>\n): number {\n  return transactions\n    .filter(t => {\n      if (tags[t.id]) return false;\n      if (t.month !== month) return false;\n\n      const account = accounts.get(t.accountCode);\n      if (!account) return false;\n\n      if (account.section === section) return true;\n      if (t.parentAccountCode) {\n        const parent = accounts.get(t.parentAccountCode);\n        if (parent?.section === section) return true;\n      }\n      return false;\n    })\n    .reduce((sum, t) => sum + t.amount, 0);\n}\n","'use client';\n\ninterface ChevronIconProps {\n  expanded: boolean;\n  className?: string;\n}\n\nexport function ChevronIcon({ expanded, className = '' }: ChevronIconProps) {\n  return (\n    <svg\n      className={`w-4 h-4 transition-transform duration-200 ${expanded ? 'rotate-90' : ''} ${className}`}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M9 5l7 7-7 7\"\n      />\n    </svg>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { Transaction } from '@/types';\nimport { usePL } from '@/context/PLContext';\nimport { formatCurrency } from '@/lib/csvParser';\n\ninterface TagModalProps {\n  transaction: Transaction;\n  onClose: () => void;\n}\n\nexport function TagModal({ transaction, onClose }: TagModalProps) {\n  const { state, dispatch } = usePL();\n  const [activeTab, setActiveTab] = useState<'personal' | 'nonRecurring'>('personal');\n  const [newSubAccount, setNewSubAccount] = useState('');\n  const [showNewInput, setShowNewInput] = useState(false);\n\n  const handleTag = (subAccount: string) => {\n    dispatch({\n      type: 'TAG_TRANSACTION',\n      payload: {\n        transactionId: transaction.id,\n        tag: {\n          category: activeTab,\n          subAccount,\n          taggedAt: Date.now()\n        }\n      }\n    });\n    onClose();\n  };\n\n  const handleAddNew = () => {\n    if (newSubAccount.trim()) {\n      dispatch({\n        type: 'ADD_SUB_ACCOUNT',\n        payload: { category: activeTab, name: newSubAccount.trim() }\n      });\n      handleTag(newSubAccount.trim());\n    }\n  };\n\n  const subAccounts = state.tagConfig[activeTab];\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-white rounded-lg shadow-xl w-full max-w-md mx-4\"\n        onClick={e => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"px-4 py-3 border-b border-slate-200\">\n          <h3 className=\"font-semibold text-slate-900\">Tag Transaction</h3>\n          <p className=\"text-sm text-slate-500 mt-1 truncate\">\n            {transaction.name || transaction.memo} - {formatCurrency(transaction.amount)}\n          </p>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex border-b border-slate-200\">\n          <button\n            className={`flex-1 px-4 py-2 text-sm font-medium border-b-2 transition-colors\n              ${activeTab === 'personal'\n                ? 'border-blue-500 text-blue-600'\n                : 'border-transparent text-slate-500 hover:text-slate-700'\n              }\n            `}\n            onClick={() => setActiveTab('personal')}\n          >\n            Personal\n          </button>\n          <button\n            className={`flex-1 px-4 py-2 text-sm font-medium border-b-2 transition-colors\n              ${activeTab === 'nonRecurring'\n                ? 'border-blue-500 text-blue-600'\n                : 'border-transparent text-slate-500 hover:text-slate-700'\n              }\n            `}\n            onClick={() => setActiveTab('nonRecurring')}\n          >\n            Non-Recurring\n          </button>\n        </div>\n\n        {/* Sub-account list */}\n        <div className=\"p-4 max-h-64 overflow-y-auto\">\n          <div className=\"space-y-2\">\n            {subAccounts.map(subAccount => (\n              <button\n                key={subAccount}\n                onClick={() => handleTag(subAccount)}\n                className=\"w-full text-left px-3 py-2 rounded-lg hover:bg-slate-100 text-slate-700 transition-colors\"\n              >\n                {subAccount}\n              </button>\n            ))}\n\n            {/* Add new option */}\n            {!showNewInput ? (\n              <button\n                onClick={() => setShowNewInput(true)}\n                className=\"w-full text-left px-3 py-2 rounded-lg hover:bg-blue-50 text-blue-600 transition-colors flex items-center gap-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                </svg>\n                Add new sub-account\n              </button>\n            ) : (\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={newSubAccount}\n                  onChange={e => setNewSubAccount(e.target.value)}\n                  placeholder=\"Enter name...\"\n                  className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  autoFocus\n                  onKeyDown={e => {\n                    if (e.key === 'Enter') handleAddNew();\n                    if (e.key === 'Escape') setShowNewInput(false);\n                  }}\n                />\n                <button\n                  onClick={handleAddNew}\n                  disabled={!newSubAccount.trim()}\n                  className=\"px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Add\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-4 py-3 border-t border-slate-200 flex justify-end\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-sm text-slate-600 hover:text-slate-800\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useState } from 'react';\nimport { Transaction } from '@/types';\nimport { usePL } from '@/context/PLContext';\nimport { formatCurrency } from '@/lib/csvParser';\nimport { TagModal } from '@/components/tagging/TagModal';\n\ninterface TransactionRowProps {\n  transaction: Transaction;\n}\n\nexport function TransactionRow({ transaction }: TransactionRowProps) {\n  const { state, dispatch } = usePL();\n  const [showTagModal, setShowTagModal] = useState(false);\n\n  const tag = state.tags[transaction.id];\n  const isTagged = !!tag;\n\n  const handleUntag = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    dispatch({ type: 'UNTAG_TRANSACTION', payload: transaction.id });\n  };\n\n  const formatDate = (dateStr: string) => {\n    const [month, day] = dateStr.split('/');\n    return `${month}/${day}`;\n  };\n\n  return (\n    <>\n      <div\n        className={`\n          flex items-center gap-3 py-1.5 px-2 rounded text-sm\n          ${isTagged ? 'bg-amber-50 opacity-60' : 'bg-white hover:bg-slate-50'}\n        `}\n      >\n        {/* Date */}\n        <span className=\"text-slate-400 font-mono text-xs w-12 flex-shrink-0\">\n          {formatDate(transaction.transactionDate)}\n        </span>\n\n        {/* Name/Vendor */}\n        <span className={`font-medium w-32 flex-shrink-0 truncate ${isTagged ? 'line-through text-slate-400' : 'text-slate-700'}`}>\n          {transaction.name || '-'}\n        </span>\n\n        {/* Memo */}\n        <span className={`flex-1 truncate ${isTagged ? 'line-through text-slate-400' : 'text-slate-500'}`}>\n          {transaction.memo || transaction.transactionType}\n        </span>\n\n        {/* Tag badge */}\n        {isTagged && (\n          <span className=\"bg-amber-200 text-amber-800 text-xs px-2 py-0.5 rounded-full flex-shrink-0\">\n            {tag.subAccount}\n          </span>\n        )}\n\n        {/* Amount */}\n        <span className={`font-mono text-right w-24 flex-shrink-0\n          ${isTagged ? 'line-through text-slate-400' : transaction.amount < 0 ? 'text-red-600' : 'text-slate-700'}\n        `}>\n          {formatCurrency(transaction.amount)}\n        </span>\n\n        {/* Tag/Untag button */}\n        {isTagged ? (\n          <button\n            onClick={handleUntag}\n            className=\"text-xs text-red-600 hover:text-red-800 px-2 py-1 rounded hover:bg-red-50 flex-shrink-0\"\n          >\n            Untag\n          </button>\n        ) : (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowTagModal(true);\n            }}\n            className=\"text-xs text-blue-600 hover:text-blue-800 px-2 py-1 rounded hover:bg-blue-50 flex-shrink-0\"\n          >\n            Tag\n          </button>\n        )}\n      </div>\n\n      {/* Tag Modal */}\n      {showTagModal && (\n        <TagModal\n          transaction={transaction}\n          onClose={() => setShowTagModal(false)}\n        />\n      )}\n    </>\n  );\n}\n","'use client';\n\nimport { useMemo } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { PLRow as PLRowType, Transaction } from '@/types';\nimport { ChevronIcon } from '@/components/ui/ChevronIcon';\nimport { formatCurrency, formatMonth } from '@/lib/csvParser';\nimport { getAccountTransactions, groupTransactionsByMonth, calculateMonthlyAmounts } from '@/lib/calculations';\nimport { TransactionRow } from './TransactionRow';\n\ninterface PLRowProps {\n  row: PLRowType;\n  months: string[];\n  depth?: number;\n  isChild?: boolean;\n}\n\nexport function PLRow({ row, months, depth = 0, isChild = false }: PLRowProps) {\n  const { state, dispatch } = usePL();\n  const { expandedAccounts, expandedMonths, transactions, accounts, tags } = state;\n\n  const isExpanded = expandedAccounts.has(row.accountCode);\n  const hasChildren = row.account.children.length > 0;\n  const hasTransactions = row.transactionCount > 0;\n  const isExpandable = hasChildren || hasTransactions;\n\n  // Get child rows if expanded\n  const childRows = useMemo(() => {\n    if (!isExpanded || !hasChildren) return [];\n\n    return row.account.children\n      .map(childCode => {\n        const childAccount = accounts.get(childCode);\n        if (!childAccount) return null;\n\n        const { monthlyAmounts, ytdTotal, transactionCount } = calculateMonthlyAmounts(\n          childCode, transactions, accounts, months, tags\n        );\n\n        if (ytdTotal === 0 && transactionCount === 0) return null;\n\n        return {\n          accountCode: childCode,\n          account: childAccount,\n          monthlyAmounts,\n          ytdTotal,\n          transactionCount\n        } as PLRowType;\n      })\n      .filter((r): r is PLRowType => r !== null);\n  }, [isExpanded, hasChildren, row.account.children, accounts, transactions, months, tags]);\n\n  // Get transactions grouped by month if expanded (only for leaf nodes)\n  const transactionsByMonth = useMemo(() => {\n    if (!isExpanded || hasChildren) return {};\n\n    const txns = getAccountTransactions(row.accountCode, transactions, accounts, tags);\n    return groupTransactionsByMonth(txns);\n  }, [isExpanded, hasChildren, row.accountCode, transactions, accounts, tags]);\n\n  const handleToggle = () => {\n    if (isExpandable) {\n      dispatch({ type: 'TOGGLE_ACCOUNT', payload: row.accountCode });\n    }\n  };\n\n  const handleMonthToggle = (month: string) => {\n    const key = `${row.accountCode}-${month}`;\n    dispatch({ type: 'TOGGLE_MONTH', payload: key });\n  };\n\n  const isMonthExpanded = (month: string) => {\n    return expandedMonths.has(`${row.accountCode}-${month}`);\n  };\n\n  const indentPadding = depth * 20;\n\n  return (\n    <>\n      {/* Main account row */}\n      <tr\n        className={`\n          ${isChild ? 'bg-slate-50/50' : 'bg-white'}\n          ${isExpandable ? 'cursor-pointer hover:bg-slate-100' : ''}\n          border-b border-slate-100\n        `}\n        onClick={handleToggle}\n      >\n        {/* Account name column */}\n        <td\n          className=\"sticky left-0 bg-inherit px-3 py-2 font-medium text-slate-900 whitespace-nowrap z-10\"\n          style={{ paddingLeft: `${12 + indentPadding}px` }}\n        >\n          <div className=\"flex items-center gap-2\">\n            {isExpandable ? (\n              <ChevronIcon expanded={isExpanded} className=\"text-slate-400 flex-shrink-0\" />\n            ) : (\n              <span className=\"w-4\" />\n            )}\n            <span className={depth > 0 ? 'text-sm' : ''}>\n              {row.account.name}\n            </span>\n          </div>\n        </td>\n\n        {/* Monthly amounts */}\n        {months.map(month => (\n          <td\n            key={month}\n            className={`px-3 py-2 text-right font-mono text-sm whitespace-nowrap\n              ${row.monthlyAmounts[month] < 0 ? 'text-red-600' : 'text-slate-700'}\n            `}\n          >\n            {row.monthlyAmounts[month] !== 0 ? formatCurrency(row.monthlyAmounts[month]) : '-'}\n          </td>\n        ))}\n\n        {/* YTD Total */}\n        <td\n          className={`px-3 py-2 text-right font-mono text-sm font-semibold whitespace-nowrap\n            ${row.ytdTotal < 0 ? 'text-red-600' : 'text-slate-900'}\n          `}\n        >\n          {formatCurrency(row.ytdTotal)}\n        </td>\n      </tr>\n\n      {/* Child account rows */}\n      {isExpanded && childRows.map(childRow => (\n        <PLRow\n          key={childRow.accountCode}\n          row={childRow}\n          months={months}\n          depth={depth + 1}\n          isChild\n        />\n      ))}\n\n      {/* Transaction month groups (for leaf nodes) */}\n      {isExpanded && !hasChildren && Object.keys(transactionsByMonth).length > 0 && (\n        <>\n          {months.filter(m => transactionsByMonth[m]?.length > 0).map(month => {\n            const monthTxns = transactionsByMonth[month] || [];\n            const monthExpanded = isMonthExpanded(month);\n\n            return (\n              <tr key={`${row.accountCode}-${month}-group`} className=\"bg-slate-50\">\n                <td\n                  colSpan={months.length + 2}\n                  className=\"px-3 py-1\"\n                  style={{ paddingLeft: `${32 + indentPadding}px` }}\n                >\n                  <div\n                    className=\"flex items-center gap-2 text-sm text-slate-600 cursor-pointer hover:text-slate-900\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleMonthToggle(month);\n                    }}\n                  >\n                    <ChevronIcon expanded={monthExpanded} className=\"text-slate-400\" />\n                    <span className=\"font-medium\">{formatMonth(month)}</span>\n                    <span className=\"text-slate-400\">({monthTxns.length} transactions)</span>\n                    <span className=\"ml-auto font-mono\">\n                      {formatCurrency(monthTxns.reduce((sum, t) => sum + t.amount, 0))}\n                    </span>\n                  </div>\n\n                  {/* Individual transactions */}\n                  {monthExpanded && (\n                    <div className=\"mt-2 space-y-1 pb-2\">\n                      {monthTxns.map(txn => (\n                        <TransactionRow key={txn.id} transaction={txn} />\n                      ))}\n                    </div>\n                  )}\n                </td>\n              </tr>\n            );\n          })}\n        </>\n      )}\n    </>\n  );\n}\n","'use client';\n\nimport { useMemo } from 'react';\nimport { PLSection as PLSectionType, PLRow as PLRowType } from '@/types';\nimport { usePL } from '@/context/PLContext';\nimport { buildPLRows, calculateSectionMonthlyTotal } from '@/lib/calculations';\nimport { formatCurrency, formatMonth } from '@/lib/csvParser';\nimport { PLRow } from './PLRow';\n\ninterface PLSectionProps {\n  section: PLSectionType;\n  title: string;\n  colorClass: string;\n}\n\nexport function PLSection({ section, title, colorClass }: PLSectionProps) {\n  const { state } = usePL();\n  const { transactions, accounts, months, tags } = state;\n\n  const rows = useMemo(() => {\n    if (transactions.length === 0) return [];\n    return buildPLRows(section, transactions, accounts, months, tags);\n  }, [section, transactions, accounts, months, tags]);\n\n  const sectionTotals = useMemo(() => {\n    const totals: Record<string, number> = {};\n    let ytd = 0;\n\n    months.forEach(month => {\n      const total = calculateSectionMonthlyTotal(section, transactions, accounts, month, tags);\n      totals[month] = total;\n      ytd += total;\n    });\n\n    return { monthly: totals, ytd };\n  }, [section, transactions, accounts, months, tags]);\n\n  if (rows.length === 0) return null;\n\n  return (\n    <div className=\"mb-6\">\n      {/* Section Header */}\n      <div className={`flex items-center gap-3 mb-2`}>\n        <div className={`w-1 h-6 rounded ${colorClass}`} />\n        <h2 className=\"text-lg font-semibold text-slate-900\">{title}</h2>\n      </div>\n\n      {/* Table */}\n      <div className=\"overflow-x-auto border border-slate-200 rounded-lg\">\n        <table className=\"w-full min-w-max\">\n          <thead>\n            <tr className=\"bg-slate-50 border-b border-slate-200\">\n              <th className=\"sticky left-0 bg-slate-50 px-3 py-2 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider w-64 z-10\">\n                Account\n              </th>\n              {months.map(month => (\n                <th\n                  key={month}\n                  className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-24\"\n                >\n                  {formatMonth(month)}\n                </th>\n              ))}\n              <th className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-28 bg-slate-100\">\n                YTD Total\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {rows.map(row => (\n              <PLRow key={row.accountCode} row={row} months={months} />\n            ))}\n\n            {/* Section Total Row */}\n            <tr className={`${colorClass.replace('bg-', 'bg-opacity-10 bg-')} border-t-2 border-slate-300`}>\n              <td className=\"sticky left-0 bg-inherit px-3 py-2 font-bold text-slate-900\">\n                Total {title}\n              </td>\n              {months.map(month => (\n                <td\n                  key={month}\n                  className={`px-3 py-2 text-right font-mono text-sm font-bold\n                    ${sectionTotals.monthly[month] < 0 ? 'text-red-600' : 'text-slate-900'}\n                  `}\n                >\n                  {formatCurrency(sectionTotals.monthly[month])}\n                </td>\n              ))}\n              <td\n                className={`px-3 py-2 text-right font-mono text-sm font-bold bg-slate-100\n                  ${sectionTotals.ytd < 0 ? 'text-red-600' : 'text-slate-900'}\n                `}\n              >\n                {formatCurrency(sectionTotals.ytd)}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n","'use client';\n\nimport { useMemo } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { calculateSectionMonthlyTotal } from '@/lib/calculations';\nimport { formatCurrency, formatMonth } from '@/lib/csvParser';\n\ninterface GrossProfitRowProps {\n  type: 'grossProfit' | 'netIncome';\n}\n\nexport function GrossProfitRow({ type }: GrossProfitRowProps) {\n  const { state } = usePL();\n  const { transactions, accounts, months, tags } = state;\n\n  const calculations = useMemo(() => {\n    const revenue: Record<string, number> = {};\n    const cogs: Record<string, number> = {};\n    const costOfSales: Record<string, number> = {};\n    const opex: Record<string, number> = {};\n    const other: Record<string, number> = {};\n\n    let revenueYtd = 0, cogsYtd = 0, cosYtd = 0, opexYtd = 0, otherYtd = 0;\n\n    months.forEach(month => {\n      revenue[month] = calculateSectionMonthlyTotal('revenue', transactions, accounts, month, tags);\n      cogs[month] = calculateSectionMonthlyTotal('cogs', transactions, accounts, month, tags);\n      costOfSales[month] = calculateSectionMonthlyTotal('costOfSales', transactions, accounts, month, tags);\n      opex[month] = calculateSectionMonthlyTotal('operatingExpenses', transactions, accounts, month, tags);\n      other[month] = calculateSectionMonthlyTotal('otherIncome', transactions, accounts, month, tags);\n\n      revenueYtd += revenue[month];\n      cogsYtd += cogs[month];\n      cosYtd += costOfSales[month];\n      opexYtd += opex[month];\n      otherYtd += other[month];\n    });\n\n    const grossProfit: Record<string, number> = {};\n    const netIncome: Record<string, number> = {};\n    let gpYtd = 0, niYtd = 0;\n\n    months.forEach(month => {\n      grossProfit[month] = revenue[month] - cogs[month] - costOfSales[month];\n      netIncome[month] = grossProfit[month] - opex[month] + other[month];\n      gpYtd += grossProfit[month];\n      niYtd += netIncome[month];\n    });\n\n    return {\n      grossProfit: { monthly: grossProfit, ytd: gpYtd },\n      netIncome: { monthly: netIncome, ytd: niYtd },\n      revenue: { monthly: revenue, ytd: revenueYtd }\n    };\n  }, [transactions, accounts, months, tags]);\n\n  if (transactions.length === 0) return null;\n\n  const data = type === 'grossProfit' ? calculations.grossProfit : calculations.netIncome;\n  const label = type === 'grossProfit' ? 'Gross Profit' : 'Net Income';\n  const bgColor = type === 'grossProfit' ? 'bg-blue-50' : 'bg-green-50';\n  const borderColor = type === 'grossProfit' ? 'border-blue-200' : 'border-green-200';\n\n  // Calculate margin\n  const margin = calculations.revenue.ytd !== 0\n    ? (data.ytd / calculations.revenue.ytd) * 100\n    : 0;\n\n  return (\n    <div className={`mb-6 overflow-x-auto border ${borderColor} rounded-lg`}>\n      <table className=\"w-full min-w-max\">\n        <thead>\n          <tr className={`${bgColor} border-b ${borderColor}`}>\n            <th className=\"sticky left-0 bg-inherit px-3 py-2 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider w-64 z-10\">\n              &nbsp;\n            </th>\n            {months.map(month => (\n              <th\n                key={month}\n                className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-24\"\n              >\n                {formatMonth(month)}\n              </th>\n            ))}\n            <th className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-28\">\n              YTD Total\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr className={bgColor}>\n            <td className=\"sticky left-0 bg-inherit px-3 py-3 font-bold text-lg text-slate-900\">\n              {label}\n              <span className=\"ml-2 text-sm font-normal text-slate-500\">\n                ({margin.toFixed(1)}% margin)\n              </span>\n            </td>\n            {months.map(month => (\n              <td\n                key={month}\n                className={`px-3 py-3 text-right font-mono font-bold text-lg\n                  ${data.monthly[month] < 0 ? 'text-red-600' : 'text-slate-900'}\n                `}\n              >\n                {formatCurrency(data.monthly[month])}\n              </td>\n            ))}\n            <td\n              className={`px-3 py-3 text-right font-mono font-bold text-lg\n                ${data.ytd < 0 ? 'text-red-600' : 'text-slate-900'}\n              `}\n            >\n              {formatCurrency(data.ytd)}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n}\n","'use client';\n\nimport { useMemo, useState } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { formatCurrency } from '@/lib/csvParser';\nimport { ChevronIcon } from '@/components/ui/ChevronIcon';\nimport { Exclusion } from '@/types';\n\ninterface GroupedExclusions {\n  [category: string]: {\n    exclusions: Exclusion[];\n    total: number;\n    justification: string;\n  };\n}\n\nexport function ExcludedSection() {\n  const { state } = usePL();\n  const [isMainExpanded, setIsMainExpanded] = useState(false);\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set());\n\n  const grouped = useMemo((): GroupedExclusions => {\n    const result: GroupedExclusions = {};\n\n    for (const exclusion of state.exclusions) {\n      if (!result[exclusion.category]) {\n        result[exclusion.category] = {\n          exclusions: [],\n          total: 0,\n          justification: exclusion.justification\n        };\n      }\n      result[exclusion.category].exclusions.push(exclusion);\n      result[exclusion.category].total += exclusion.amount;\n    }\n\n    return result;\n  }, [state.exclusions]);\n\n  const totalExcluded = useMemo(() => {\n    return state.exclusions.reduce((sum, e) => sum + e.amount, 0);\n  }, [state.exclusions]);\n\n  const categories = Object.keys(grouped).sort();\n\n  if (state.exclusions.length === 0) return null;\n\n  const toggleCategory = (category: string) => {\n    const newExpanded = new Set(expandedCategories);\n    if (newExpanded.has(category)) {\n      newExpanded.delete(category);\n    } else {\n      newExpanded.add(category);\n    }\n    setExpandedCategories(newExpanded);\n  };\n\n  // Category colors\n  const getCategoryColor = (category: string): string => {\n    const colors: Record<string, string> = {\n      'Personal': 'bg-purple-500',\n      'Discretionary': 'bg-purple-400',\n      'Owner Travel': 'bg-blue-500',\n      'Owner Education': 'bg-blue-400',\n      'Legal': 'bg-red-500',\n      'Legal/Tax': 'bg-red-400',\n      'One-Time Project': 'bg-amber-500',\n      'One-Time COGS': 'bg-amber-400',\n      'Terminated Agency': 'bg-orange-500',\n      'Terminated Contractor': 'bg-orange-400',\n      'Terminated Service': 'bg-orange-300',\n      'M&A Process': 'bg-slate-500',\n    };\n    return colors[category] || 'bg-slate-400';\n  };\n\n  return (\n    <div className=\"mt-8 pt-6 border-t-2 border-slate-300\">\n      {/* Main Header - Collapsible */}\n      <div\n        className=\"flex items-center gap-3 mb-4 cursor-pointer hover:opacity-80\"\n        onClick={() => setIsMainExpanded(!isMainExpanded)}\n      >\n        <ChevronIcon expanded={isMainExpanded} className=\"text-slate-400\" />\n        <div className=\"w-1 h-6 rounded bg-amber-500\" />\n        <h2 className=\"text-lg font-semibold text-slate-900\">Exclusions</h2>\n        <span className=\"text-sm text-slate-500\">\n          ({state.exclusions.length} items excluded from P&L)\n        </span>\n        <span className=\"ml-auto font-mono font-semibold text-slate-700\">\n          {formatCurrency(totalExcluded)}\n        </span>\n      </div>\n\n      {isMainExpanded && (\n        <div className=\"space-y-3 pl-6\">\n          {/* Summary by category */}\n          <p className=\"text-sm text-slate-600 mb-4\">\n            The following expenses have been excluded as non-recurring or owner-related items that would not transfer to a buyer.\n          </p>\n\n          {categories.map(category => {\n            const data = grouped[category];\n            const isExpanded = expandedCategories.has(category);\n\n            return (\n              <div key={category} className=\"border border-slate-200 rounded-lg overflow-hidden\">\n                {/* Category Header */}\n                <div\n                  className=\"flex items-center gap-3 px-4 py-3 bg-slate-50 cursor-pointer hover:bg-slate-100\"\n                  onClick={() => toggleCategory(category)}\n                >\n                  <ChevronIcon expanded={isExpanded} className=\"text-slate-400\" />\n                  <div className={`w-2 h-2 rounded-full ${getCategoryColor(category)}`} />\n                  <span className=\"font-semibold text-slate-900\">{category}</span>\n                  <span className=\"text-sm text-slate-500\">\n                    ({data.exclusions.length} items)\n                  </span>\n                  <span className=\"ml-auto text-xs text-slate-500 max-w-md truncate\">\n                    {data.justification}\n                  </span>\n                  <span className=\"font-mono font-semibold text-slate-700 ml-4\">\n                    {formatCurrency(data.total)}\n                  </span>\n                </div>\n\n                {/* Transactions */}\n                {isExpanded && (\n                  <div className=\"divide-y divide-slate-100\">\n                    {data.exclusions.map((exc, idx) => (\n                      <div\n                        key={`${exc.date}-${exc.amount}-${idx}`}\n                        className=\"flex items-center gap-4 px-6 py-2 bg-white text-sm hover:bg-slate-50\"\n                      >\n                        <span className=\"text-slate-400 w-24\">{exc.date}</span>\n                        <span className=\"text-slate-700 flex-1 truncate\">\n                          {exc.vendor || exc.memo?.substring(0, 40) || 'Unknown'}\n                        </span>\n                        <span className=\"text-slate-500 text-xs w-32 truncate\">\n                          {exc.account.replace(/^\\d{4}\\s+/, '')}\n                        </span>\n                        <span className=\"font-mono text-slate-600 w-24 text-right\">\n                          {formatCurrency(exc.amount)}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}