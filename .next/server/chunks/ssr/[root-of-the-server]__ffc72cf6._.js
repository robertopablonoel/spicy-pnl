module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},10074,(a,b,c)=>{"use strict";b.exports=a.r(18622)},82332,(a,b,c)=>{"use strict";b.exports=a.r(10074).vendored["react-ssr"].ReactJsxRuntime},55005,(a,b,c)=>{"use strict";b.exports=a.r(10074).vendored["react-ssr"].React},1163,46726,a=>{"use strict";var b=a.i(82332),c=a.i(55005);function d(a){if(!a||""===a.trim())return 0;let b=parseFloat(a.replace(/[$,"]/g,""));return isNaN(b)?0:b}function e(a){let b=parseInt(a,10);return b>=4e3&&b<4100?"revenue":b>=5e3&&b<6e3?"cogs":b>=6e3&&b<6100?"costOfSales":b>=6100&&b<7e3?"operatingExpenses":b>=7e3&&b<8e3?"otherIncome":"operatingExpenses"}function f(a){let b=a.split(":");return b[b.length-1].trim().replace(/^\d{4}\s+/,"")}function g(a){let b=a.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"),c=[],g=new Map,h=new Set,i=null,j=null;for(let a=5;a<b.length;a++){let e=b[a].trim();if(!e||",,,,,,,,,"===e||e.startsWith("Total for"))continue;let f=e.match(/^([^,]+),,,,,,,,,$/);if(f){j=function(a){let b=a.match(/^(\d{4})/);return b?b[1]:""}(i=f[1].trim());continue}if(!j||!function(a){let b=parseInt(a,10);return b>=4e3&&b<8e3}(j))continue;let g=function(a){let b=[],c="",d=!1;for(let e=0;e<a.length;e++){let f=a[e];'"'===f?d=!d:","!==f||d?c+=f:(b.push(c.trim()),c="")}return b.push(c.trim()),b}(e),h=g[1];if(!h||!/^\d{2}\/\d{2}\/\d{4}$/.test(h))continue;let k=i,l={transactionDate:h,transactionType:g[2]||"",num:g[3]||"",name:g[4]||"",classFullName:g[5]||"",memo:g[6]||"",accountFullName:k,amount:d(g[8]),balance:d(g[9])};c.push(l)}return{transactions:c.map((a,b)=>{let c,d,{code:i,parentCode:j}=function(a){if(!a)return{code:"",parentCode:null};let b=a.split(":");if(1===b.length){let b=a.match(/^(\d{4})/);return{code:b?b[1]:"",parentCode:null}}let c=b[b.length-1].trim(),d=b[0].trim(),e=c.match(/^(\d{4})/),f=d.match(/^(\d{4})/);return{code:e?e[1]:"",parentCode:f?f[1]:null}}(a.accountFullName),k=function(a){if(!a)return"";let b=a.split("/");if(3!==b.length)return"";let c=b[0].padStart(2,"0"),d=b[2];return`${d}-${c}`}(a.transactionDate);if(k&&h.add(k),i&&!g.has(i)&&g.set(i,{code:i,name:f(a.accountFullName),fullName:a.accountFullName,parentCode:j,section:e(i),children:[],depth:+!!j}),j&&i){let b=g.get(j);if(b&&!b.children.includes(i))b.children.push(i);else if(!b){let b=a.accountFullName.split(":")[0].trim();g.set(j,{code:j,name:f(b),fullName:b,parentCode:null,section:e(j),children:[i],depth:0})}}return{...a,id:(c=a.transactionDate.replace(/\//g,"-"),d=a.accountFullName.substring(0,20).replace(/[^a-zA-Z0-9]/g,""),`txn-${c}-${d}-${b}`),month:k,accountCode:i,parentAccountCode:j}}),accounts:g,months:Array.from(h).sort()}}function h(a){let b=Math.abs(a),c=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(b);return a<0?`(${c})`:c}function i(a){let[b,c]=a.split("-");return new Date(parseInt(b),parseInt(c)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}a.s(["formatCurrency",()=>h,"formatMonth",()=>i,"parseCSV",()=>g],46726);let j={transactions:[],accounts:new Map,tags:{},tagConfig:{personal:["Owner's Draw","Personal Meals","Personal Travel","Personal Shopping"],nonRecurring:["One-time Setup","Settlement","Equipment Purchase","Legal Settlement"]},expandedAccounts:new Set,expandedMonths:new Set,months:[],exclusions:[],khBrokersView:!0,loading:!0,error:null};function k(a,b){switch(b.type){case"SET_LOADING":return{...a,loading:b.payload};case"SET_ERROR":return{...a,error:b.payload,loading:!1};case"LOAD_DATA":return{...a,transactions:b.payload.transactions,accounts:b.payload.accounts,months:b.payload.months,exclusions:b.payload.exclusions,loading:!1,error:null};case"TOGGLE_ACCOUNT":{let c=new Set(a.expandedAccounts);return c.has(b.payload)?c.delete(b.payload):c.add(b.payload),{...a,expandedAccounts:c}}case"TOGGLE_MONTH":{let c=new Set(a.expandedMonths);return c.has(b.payload)?c.delete(b.payload):c.add(b.payload),{...a,expandedMonths:c}}case"TAG_TRANSACTION":return{...a,tags:{...a.tags,[b.payload.transactionId]:b.payload.tag}};case"UNTAG_TRANSACTION":{let c={...a.tags};return delete c[b.payload],{...a,tags:c}}case"ADD_SUB_ACCOUNT":{let{category:c,name:d}=b.payload;if(a.tagConfig[c].includes(d))return a;return{...a,tagConfig:{...a.tagConfig,[c]:[...a.tagConfig[c],d]}}}case"LOAD_TAGS":return{...a,tags:b.payload.tags,tagConfig:b.payload.config};case"TOGGLE_KH_BROKERS_VIEW":return{...a,khBrokersView:!a.khBrokersView};default:return a}}let l=(0,c.createContext)(null),m="pnl-tags",n="pnl-tag-config";function o({children:a}){let[d,e]=(0,c.useReducer)(k,j);return(0,c.useEffect)(()=>{!async function(){try{e({type:"SET_LOADING",payload:!0});let[a,b]=await Promise.all([fetch("/all-txn.csv"),fetch("/exclusions.csv")]);if(!a.ok)throw Error("Failed to load transaction CSV file");let c=await a.text(),{transactions:d,accounts:f,months:h}=g(c),i=d.filter(a=>!a.month.endsWith("-12")),k=h.filter(a=>!a.endsWith("-12")),l=[],m={};if(b.ok){let a=await b.text(),c=function(a){let b=a.trim().split("\n"),c=[];for(let a=1;a<b.length;a++){let d=b[a];if(!d.trim())continue;let e=[],f="",g=!1;for(let a=0;a<d.length;a++){let b=d[a];'"'===b?g=!g:","!==b||g?f+=b:(e.push(f.trim()),f="")}e.push(f.trim()),e.length>=8&&c.push({date:e[0],vendor:e[1],memo:e[2],account:e[3],accountCode:e[4],amount:parseFloat(e[5])||0,category:e[6],justification:e[7]})}return c}(a),d=function(a,b){let c={},d=[];for(let e of a){let a=b.find(a=>{let b=a.transactionDate,d=.01>Math.abs(a.amount-e.amount),f=b===e.date,g=a.accountCode===e.accountCode;return f&&d&&g&&!c[a.id]});a&&(c[a.id]={category:e.category.includes("Personal")||"Discretionary"===e.category?"personal":"nonRecurring",subAccount:e.category,taggedAt:Date.now()},d.push({...e,transactionId:a.id}))}return{matchedExclusions:d,tags:c}}(c,i);l=d.matchedExclusions,m=d.tags}e({type:"LOAD_DATA",payload:{transactions:i,accounts:f,months:k,exclusions:l}}),Object.keys(m).length>0&&e({type:"LOAD_TAGS",payload:{tags:m,config:j.tagConfig}})}catch(a){e({type:"SET_ERROR",payload:a instanceof Error?a.message:"Unknown error"})}}()},[]),(0,c.useEffect)(()=>{try{let a=localStorage.getItem(m),b=localStorage.getItem(n);(a||b)&&e({type:"LOAD_TAGS",payload:{tags:a?JSON.parse(a):{},config:b?JSON.parse(b):j.tagConfig}})}catch(a){console.error("Failed to load tags from localStorage:",a)}},[]),(0,c.useEffect)(()=>{if(!d.loading)try{localStorage.setItem(m,JSON.stringify(d.tags)),localStorage.setItem(n,JSON.stringify(d.tagConfig))}catch(a){console.error("Failed to save tags to localStorage:",a)}},[d.tags,d.tagConfig,d.loading]),(0,b.jsx)(l.Provider,{value:{state:d,dispatch:e},children:a})}function p(){let a=(0,c.useContext)(l);if(!a)throw Error("usePL must be used within a PLProvider");return a}a.s(["PLProvider",()=>o,"usePL",()=>p],1163)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ffc72cf6._.js.map