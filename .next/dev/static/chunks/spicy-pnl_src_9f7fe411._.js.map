{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/lib/calculations.ts"],"sourcesContent":["import { Transaction, Account, PLRow, PLSummary, TransactionTag, PLSection } from '@/types';\n\n// Get all transactions for an account (including children)\nexport function getAccountTransactions(\n  accountCode: string,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  tags: Record<string, TransactionTag>,\n  includeTagged: boolean = false\n): Transaction[] {\n  const account = accounts.get(accountCode);\n  if (!account) return [];\n\n  // Get direct transactions\n  let result = transactions.filter(t => {\n    const matchesAccount = t.accountCode === accountCode ||\n      (t.parentAccountCode === accountCode && !accounts.has(t.accountCode));\n    const isTagged = tags[t.id] !== undefined;\n    return matchesAccount && (includeTagged || !isTagged);\n  });\n\n  // Add child account transactions\n  for (const childCode of account.children) {\n    result = result.concat(\n      getAccountTransactions(childCode, transactions, accounts, tags, includeTagged)\n    );\n  }\n\n  return result;\n}\n\n// Calculate monthly amounts for an account\nexport function calculateMonthlyAmounts(\n  accountCode: string,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  months: string[],\n  tags: Record<string, TransactionTag>\n): { monthlyAmounts: Record<string, number>; ytdTotal: number; transactionCount: number } {\n  const accountTransactions = getAccountTransactions(accountCode, transactions, accounts, tags);\n\n  const monthlyAmounts: Record<string, number> = {};\n  months.forEach(m => { monthlyAmounts[m] = 0; });\n\n  let ytdTotal = 0;\n\n  for (const txn of accountTransactions) {\n    if (txn.month && monthlyAmounts[txn.month] !== undefined) {\n      monthlyAmounts[txn.month] += txn.amount;\n      ytdTotal += txn.amount;\n    }\n  }\n\n  return { monthlyAmounts, ytdTotal, transactionCount: accountTransactions.length };\n}\n\n// Build P&L rows for a section\nexport function buildPLRows(\n  section: PLSection,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  months: string[],\n  tags: Record<string, TransactionTag>\n): PLRow[] {\n  const rows: PLRow[] = [];\n\n  // Get top-level accounts for this section\n  const topLevelAccounts = Array.from(accounts.values())\n    .filter(a => a.section === section && a.parentCode === null)\n    .sort((a, b) => a.code.localeCompare(b.code));\n\n  for (const account of topLevelAccounts) {\n    const { monthlyAmounts, ytdTotal, transactionCount } = calculateMonthlyAmounts(\n      account.code, transactions, accounts, months, tags\n    );\n\n    // Only add if there's activity\n    if (ytdTotal !== 0 || transactionCount > 0) {\n      rows.push({\n        accountCode: account.code,\n        account,\n        monthlyAmounts,\n        ytdTotal,\n        transactionCount\n      });\n    }\n  }\n\n  return rows;\n}\n\n// Calculate P&L summary metrics\nexport function calculatePLSummary(\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  tags: Record<string, TransactionTag>\n): PLSummary {\n  // Filter out tagged transactions\n  const activeTransactions = transactions.filter(t => !tags[t.id]);\n  const taggedTransactions = transactions.filter(t => tags[t.id]);\n\n  // Calculate by section\n  const bySection = (section: PLSection) =>\n    activeTransactions\n      .filter(t => {\n        const account = accounts.get(t.accountCode);\n        if (!account) return false;\n        // Check if this account or its parent matches the section\n        if (account.section === section) return true;\n        if (t.parentAccountCode) {\n          const parent = accounts.get(t.parentAccountCode);\n          if (parent?.section === section) return true;\n        }\n        return false;\n      })\n      .reduce((sum, t) => sum + t.amount, 0);\n\n  // Revenue breakdown\n  const revenueTransactions = activeTransactions.filter(t => {\n    const code = parseInt(t.accountCode, 10);\n    return code >= 4000 && code < 4100;\n  });\n\n  // Gross revenue (4000 Sales + 4030 Shipping)\n  const grossRevenue = revenueTransactions\n    .filter(t => t.accountCode === '4000' || t.accountCode === '4030')\n    .reduce((sum, t) => sum + t.amount, 0);\n\n  // Contra revenue (discounts, refunds, chargebacks - these are negative)\n  const contraRevenue = revenueTransactions\n    .filter(t => t.accountCode === '4010' || t.accountCode === '4020' || t.accountCode === '4040')\n    .reduce((sum, t) => sum + t.amount, 0);\n\n  const netRevenue = grossRevenue + contraRevenue;\n\n  // Cost sections\n  const totalCOGS = bySection('cogs');\n  const totalCostOfSales = bySection('costOfSales');\n  const totalOpEx = bySection('operatingExpenses');\n  const otherIncome = bySection('otherIncome');\n\n  // Calculated metrics\n  const grossProfit = netRevenue - totalCOGS - totalCostOfSales;\n  const grossMargin = netRevenue !== 0 ? (grossProfit / netRevenue) * 100 : 0;\n  const netIncome = grossProfit - totalOpEx + otherIncome;\n  const netMargin = netRevenue !== 0 ? (netIncome / netRevenue) * 100 : 0;\n\n  // Tagged items - use net amount (not absolute) to match exclusions display\n  const taggedAmount = taggedTransactions.reduce((sum, t) => sum + t.amount, 0);\n\n  return {\n    grossRevenue,\n    netRevenue,\n    totalCOGS,\n    totalCostOfSales,\n    grossProfit,\n    grossMargin,\n    totalOpEx,\n    otherIncome,\n    netIncome,\n    netMargin,\n    taggedItemsCount: taggedTransactions.length,\n    taggedAmount\n  };\n}\n\n// Group transactions by month\nexport function groupTransactionsByMonth(transactions: Transaction[]): Record<string, Transaction[]> {\n  const grouped: Record<string, Transaction[]> = {};\n\n  for (const txn of transactions) {\n    if (!grouped[txn.month]) {\n      grouped[txn.month] = [];\n    }\n    grouped[txn.month].push(txn);\n  }\n\n  // Sort transactions within each month by date\n  for (const month of Object.keys(grouped)) {\n    grouped[month].sort((a, b) => {\n      const dateA = new Date(a.transactionDate);\n      const dateB = new Date(b.transactionDate);\n      return dateA.getTime() - dateB.getTime();\n    });\n  }\n\n  return grouped;\n}\n\n// Get tagged transactions grouped by category and sub-account\nexport function getTaggedTransactionsGrouped(\n  transactions: Transaction[],\n  tags: Record<string, TransactionTag>\n): Record<string, Record<string, Transaction[]>> {\n  const result: Record<string, Record<string, Transaction[]>> = {\n    personal: {},\n    nonRecurring: {}\n  };\n\n  for (const txn of transactions) {\n    const tag = tags[txn.id];\n    if (!tag) continue;\n\n    if (!result[tag.category][tag.subAccount]) {\n      result[tag.category][tag.subAccount] = [];\n    }\n    result[tag.category][tag.subAccount].push(txn);\n  }\n\n  return result;\n}\n\n// Calculate section total for a month\nexport function calculateSectionMonthlyTotal(\n  section: PLSection,\n  transactions: Transaction[],\n  accounts: Map<string, Account>,\n  month: string,\n  tags: Record<string, TransactionTag>\n): number {\n  return transactions\n    .filter(t => {\n      if (tags[t.id]) return false;\n      if (t.month !== month) return false;\n\n      const account = accounts.get(t.accountCode);\n      if (!account) return false;\n\n      if (account.section === section) return true;\n      if (t.parentAccountCode) {\n        const parent = accounts.get(t.parentAccountCode);\n        if (parent?.section === section) return true;\n      }\n      return false;\n    })\n    .reduce((sum, t) => sum + t.amount, 0);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/pnl/SummaryCards.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { calculatePLSummary } from '@/lib/calculations';\nimport { formatCurrency } from '@/lib/csvParser';\n\nexport function SummaryCards() {\n  const { state } = usePL();\n\n  const summary = useMemo(() => {\n    if (state.transactions.length === 0) return null;\n    return calculatePLSummary(state.transactions, state.accounts, state.tags);\n  }, [state.transactions, state.accounts, state.tags]);\n\n  if (!summary) return null;\n\n  const cards = [\n    {\n      label: 'Net Revenue',\n      value: summary.netRevenue,\n      color: 'bg-emerald-50 border-emerald-200',\n      textColor: 'text-emerald-700',\n      valueColor: 'text-emerald-900'\n    },\n    {\n      label: 'Gross Profit',\n      value: summary.grossProfit,\n      subLabel: `${summary.grossMargin.toFixed(1)}% margin`,\n      color: 'bg-blue-50 border-blue-200',\n      textColor: 'text-blue-700',\n      valueColor: 'text-blue-900'\n    },\n    {\n      label: 'Net Income',\n      value: summary.netIncome,\n      subLabel: `${summary.netMargin.toFixed(1)}% margin`,\n      color: summary.netIncome >= 0 ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200',\n      textColor: summary.netIncome >= 0 ? 'text-green-700' : 'text-red-700',\n      valueColor: summary.netIncome >= 0 ? 'text-green-900' : 'text-red-900'\n    },\n    {\n      label: 'Tagged Items',\n      value: summary.taggedAmount,\n      subLabel: `${summary.taggedItemsCount} transactions`,\n      color: 'bg-amber-50 border-amber-200',\n      textColor: 'text-amber-700',\n      valueColor: 'text-amber-900'\n    }\n  ];\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\n      {cards.map((card) => (\n        <div\n          key={card.label}\n          className={`${card.color} border rounded-lg p-4 shadow-sm`}\n        >\n          <div className={`text-sm font-medium ${card.textColor}`}>\n            {card.label}\n          </div>\n          <div className={`text-2xl font-bold ${card.valueColor} mt-1`}>\n            {formatCurrency(card.value)}\n          </div>\n          {card.subLabel && (\n            <div className={`text-xs ${card.textColor} mt-1 opacity-75`}>\n              {card.subLabel}\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOO,SAAS;;IACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wJAAK;IAEvB,MAAM,UAAU,IAAA,wLAAO;yCAAC;YACtB,IAAI,MAAM,YAAY,CAAC,MAAM,KAAK,GAAG,OAAO;YAC5C,OAAO,IAAA,mKAAkB,EAAC,MAAM,YAAY,EAAE,MAAM,QAAQ,EAAE,MAAM,IAAI;QAC1E;wCAAG;QAAC,MAAM,YAAY;QAAE,MAAM,QAAQ;QAAE,MAAM,IAAI;KAAC;IAEnD,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,QAAQ;QACZ;YACE,OAAO;YACP,OAAO,QAAQ,UAAU;YACzB,OAAO;YACP,WAAW;YACX,YAAY;QACd;QACA;YACE,OAAO;YACP,OAAO,QAAQ,WAAW;YAC1B,UAAU,GAAG,QAAQ,WAAW,CAAC,OAAO,CAAC,GAAG,QAAQ,CAAC;YACrD,OAAO;YACP,WAAW;YACX,YAAY;QACd;QACA;YACE,OAAO;YACP,OAAO,QAAQ,SAAS;YACxB,UAAU,GAAG,QAAQ,SAAS,CAAC,OAAO,CAAC,GAAG,QAAQ,CAAC;YACnD,OAAO,QAAQ,SAAS,IAAI,IAAI,iCAAiC;YACjE,WAAW,QAAQ,SAAS,IAAI,IAAI,mBAAmB;YACvD,YAAY,QAAQ,SAAS,IAAI,IAAI,mBAAmB;QAC1D;QACA;YACE,OAAO;YACP,OAAO,QAAQ,YAAY;YAC3B,UAAU,GAAG,QAAQ,gBAAgB,CAAC,aAAa,CAAC;YACpD,OAAO;YACP,WAAW;YACX,YAAY;QACd;KACD;IAED,qBACE,6MAAC;QAAI,WAAU;kBACZ,MAAM,GAAG,CAAC,CAAC,qBACV,6MAAC;gBAEC,WAAW,GAAG,KAAK,KAAK,CAAC,gCAAgC,CAAC;;kCAE1D,6MAAC;wBAAI,WAAW,CAAC,oBAAoB,EAAE,KAAK,SAAS,EAAE;kCACpD,KAAK,KAAK;;;;;;kCAEb,6MAAC;wBAAI,WAAW,CAAC,mBAAmB,EAAE,KAAK,UAAU,CAAC,KAAK,CAAC;kCACzD,IAAA,4JAAc,EAAC,KAAK,KAAK;;;;;;oBAE3B,KAAK,QAAQ,kBACZ,6MAAC;wBAAI,WAAW,CAAC,QAAQ,EAAE,KAAK,SAAS,CAAC,gBAAgB,CAAC;kCACxD,KAAK,QAAQ;;;;;;;eAXb,KAAK,KAAK;;;;;;;;;;AAkBzB;GAlEgB;;QACI,wJAAK;;;KADT"}},
    {"offset": {"line": 299, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/ui/ChevronIcon.tsx"],"sourcesContent":["'use client';\n\ninterface ChevronIconProps {\n  expanded: boolean;\n  className?: string;\n}\n\nexport function ChevronIcon({ expanded, className = '' }: ChevronIconProps) {\n  return (\n    <svg\n      className={`w-4 h-4 transition-transform duration-200 ${expanded ? 'rotate-90' : ''} ${className}`}\n      fill=\"none\"\n      stroke=\"currentColor\"\n      viewBox=\"0 0 24 24\"\n    >\n      <path\n        strokeLinecap=\"round\"\n        strokeLinejoin=\"round\"\n        strokeWidth={2}\n        d=\"M9 5l7 7-7 7\"\n      />\n    </svg>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAOO,SAAS,YAAY,EAAE,QAAQ,EAAE,YAAY,EAAE,EAAoB;IACxE,qBACE,6MAAC;QACC,WAAW,CAAC,0CAA0C,EAAE,WAAW,cAAc,GAAG,CAAC,EAAE,WAAW;QAClG,MAAK;QACL,QAAO;QACP,SAAQ;kBAER,cAAA,6MAAC;YACC,eAAc;YACd,gBAAe;YACf,aAAa;YACb,GAAE;;;;;;;;;;;AAIV;KAhBgB"}},
    {"offset": {"line": 338, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/tagging/TagModal.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Transaction } from '@/types';\nimport { usePL } from '@/context/PLContext';\nimport { formatCurrency } from '@/lib/csvParser';\n\ninterface TagModalProps {\n  transaction: Transaction;\n  onClose: () => void;\n}\n\nexport function TagModal({ transaction, onClose }: TagModalProps) {\n  const { state, dispatch } = usePL();\n  const [activeTab, setActiveTab] = useState<'personal' | 'nonRecurring'>('personal');\n  const [newSubAccount, setNewSubAccount] = useState('');\n  const [showNewInput, setShowNewInput] = useState(false);\n\n  const handleTag = (subAccount: string) => {\n    dispatch({\n      type: 'TAG_TRANSACTION',\n      payload: {\n        transactionId: transaction.id,\n        tag: {\n          category: activeTab,\n          subAccount,\n          taggedAt: Date.now()\n        }\n      }\n    });\n    onClose();\n  };\n\n  const handleAddNew = () => {\n    if (newSubAccount.trim()) {\n      dispatch({\n        type: 'ADD_SUB_ACCOUNT',\n        payload: { category: activeTab, name: newSubAccount.trim() }\n      });\n      handleTag(newSubAccount.trim());\n    }\n  };\n\n  const subAccounts = state.tagConfig[activeTab];\n\n  return (\n    <div\n      className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n      onClick={onClose}\n    >\n      <div\n        className=\"bg-white rounded-lg shadow-xl w-full max-w-md mx-4\"\n        onClick={e => e.stopPropagation()}\n      >\n        {/* Header */}\n        <div className=\"px-4 py-3 border-b border-slate-200\">\n          <h3 className=\"font-semibold text-slate-900\">Tag Transaction</h3>\n          <p className=\"text-sm text-slate-500 mt-1 truncate\">\n            {transaction.name || transaction.memo} - {formatCurrency(transaction.amount)}\n          </p>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex border-b border-slate-200\">\n          <button\n            className={`flex-1 px-4 py-2 text-sm font-medium border-b-2 transition-colors\n              ${activeTab === 'personal'\n                ? 'border-blue-500 text-blue-600'\n                : 'border-transparent text-slate-500 hover:text-slate-700'\n              }\n            `}\n            onClick={() => setActiveTab('personal')}\n          >\n            Personal\n          </button>\n          <button\n            className={`flex-1 px-4 py-2 text-sm font-medium border-b-2 transition-colors\n              ${activeTab === 'nonRecurring'\n                ? 'border-blue-500 text-blue-600'\n                : 'border-transparent text-slate-500 hover:text-slate-700'\n              }\n            `}\n            onClick={() => setActiveTab('nonRecurring')}\n          >\n            Non-Recurring\n          </button>\n        </div>\n\n        {/* Sub-account list */}\n        <div className=\"p-4 max-h-64 overflow-y-auto\">\n          <div className=\"space-y-2\">\n            {subAccounts.map(subAccount => (\n              <button\n                key={subAccount}\n                onClick={() => handleTag(subAccount)}\n                className=\"w-full text-left px-3 py-2 rounded-lg hover:bg-slate-100 text-slate-700 transition-colors\"\n              >\n                {subAccount}\n              </button>\n            ))}\n\n            {/* Add new option */}\n            {!showNewInput ? (\n              <button\n                onClick={() => setShowNewInput(true)}\n                className=\"w-full text-left px-3 py-2 rounded-lg hover:bg-blue-50 text-blue-600 transition-colors flex items-center gap-2\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\n                </svg>\n                Add new sub-account\n              </button>\n            ) : (\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={newSubAccount}\n                  onChange={e => setNewSubAccount(e.target.value)}\n                  placeholder=\"Enter name...\"\n                  className=\"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  autoFocus\n                  onKeyDown={e => {\n                    if (e.key === 'Enter') handleAddNew();\n                    if (e.key === 'Escape') setShowNewInput(false);\n                  }}\n                />\n                <button\n                  onClick={handleAddNew}\n                  disabled={!newSubAccount.trim()}\n                  className=\"px-3 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\n                >\n                  Add\n                </button>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <div className=\"px-4 py-3 border-t border-slate-200 flex justify-end\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 text-sm text-slate-600 hover:text-slate-800\"\n          >\n            Cancel\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;;;AALA;;;;AAYO,SAAS,SAAS,EAAE,WAAW,EAAE,OAAO,EAAiB;;IAC9D,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,wJAAK;IACjC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yLAAQ,EAA8B;IACxE,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yLAAQ,EAAC;IACnD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yLAAQ,EAAC;IAEjD,MAAM,YAAY,CAAC;QACjB,SAAS;YACP,MAAM;YACN,SAAS;gBACP,eAAe,YAAY,EAAE;gBAC7B,KAAK;oBACH,UAAU;oBACV;oBACA,UAAU,KAAK,GAAG;gBACpB;YACF;QACF;QACA;IACF;IAEA,MAAM,eAAe;QACnB,IAAI,cAAc,IAAI,IAAI;YACxB,SAAS;gBACP,MAAM;gBACN,SAAS;oBAAE,UAAU;oBAAW,MAAM,cAAc,IAAI;gBAAG;YAC7D;YACA,UAAU,cAAc,IAAI;QAC9B;IACF;IAEA,MAAM,cAAc,MAAM,SAAS,CAAC,UAAU;IAE9C,qBACE,6MAAC;QACC,WAAU;QACV,SAAS;kBAET,cAAA,6MAAC;YACC,WAAU;YACV,SAAS,CAAA,IAAK,EAAE,eAAe;;8BAG/B,6MAAC;oBAAI,WAAU;;sCACb,6MAAC;4BAAG,WAAU;sCAA+B;;;;;;sCAC7C,6MAAC;4BAAE,WAAU;;gCACV,YAAY,IAAI,IAAI,YAAY,IAAI;gCAAC;gCAAI,IAAA,4JAAc,EAAC,YAAY,MAAM;;;;;;;;;;;;;8BAK/E,6MAAC;oBAAI,WAAU;;sCACb,6MAAC;4BACC,WAAW,CAAC;cACV,EAAE,cAAc,aACZ,kCACA,yDACH;YACH,CAAC;4BACD,SAAS,IAAM,aAAa;sCAC7B;;;;;;sCAGD,6MAAC;4BACC,WAAW,CAAC;cACV,EAAE,cAAc,iBACZ,kCACA,yDACH;YACH,CAAC;4BACD,SAAS,IAAM,aAAa;sCAC7B;;;;;;;;;;;;8BAMH,6MAAC;oBAAI,WAAU;8BACb,cAAA,6MAAC;wBAAI,WAAU;;4BACZ,YAAY,GAAG,CAAC,CAAA,2BACf,6MAAC;oCAEC,SAAS,IAAM,UAAU;oCACzB,WAAU;8CAET;mCAJI;;;;;4BASR,CAAC,6BACA,6MAAC;gCACC,SAAS,IAAM,gBAAgB;gCAC/B,WAAU;;kDAEV,6MAAC;wCAAI,WAAU;wCAAU,MAAK;wCAAO,QAAO;wCAAe,SAAQ;kDACjE,cAAA,6MAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAE;;;;;;;;;;;oCACjE;;;;;;qDAIR,6MAAC;gCAAI,WAAU;;kDACb,6MAAC;wCACC,MAAK;wCACL,OAAO;wCACP,UAAU,CAAA,IAAK,iBAAiB,EAAE,MAAM,CAAC,KAAK;wCAC9C,aAAY;wCACZ,WAAU;wCACV,SAAS;wCACT,WAAW,CAAA;4CACT,IAAI,EAAE,GAAG,KAAK,SAAS;4CACvB,IAAI,EAAE,GAAG,KAAK,UAAU,gBAAgB;wCAC1C;;;;;;kDAEF,6MAAC;wCACC,SAAS;wCACT,UAAU,CAAC,cAAc,IAAI;wCAC7B,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;8BAST,6MAAC;oBAAI,WAAU;8BACb,cAAA,6MAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;;;;;;;;;;;AAOX;GA1IgB;;QACc,wJAAK;;;KADnB"}},
    {"offset": {"line": 585, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/pnl/TransactionRow.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { Transaction } from '@/types';\nimport { usePL } from '@/context/PLContext';\nimport { formatCurrency } from '@/lib/csvParser';\nimport { TagModal } from '@/components/tagging/TagModal';\n\ninterface TransactionRowProps {\n  transaction: Transaction;\n}\n\nexport function TransactionRow({ transaction }: TransactionRowProps) {\n  const { state, dispatch } = usePL();\n  const [showTagModal, setShowTagModal] = useState(false);\n\n  const tag = state.tags[transaction.id];\n  const isTagged = !!tag;\n\n  const handleUntag = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    dispatch({ type: 'UNTAG_TRANSACTION', payload: transaction.id });\n  };\n\n  const formatDate = (dateStr: string) => {\n    const [month, day] = dateStr.split('/');\n    return `${month}/${day}`;\n  };\n\n  return (\n    <>\n      <div\n        className={`\n          flex items-center gap-3 py-1.5 px-2 rounded text-sm\n          ${isTagged ? 'bg-amber-50 opacity-60' : 'bg-white hover:bg-slate-50'}\n        `}\n      >\n        {/* Date */}\n        <span className=\"text-slate-400 font-mono text-xs w-12 flex-shrink-0\">\n          {formatDate(transaction.transactionDate)}\n        </span>\n\n        {/* Name/Vendor */}\n        <span className={`font-medium w-32 flex-shrink-0 truncate ${isTagged ? 'line-through text-slate-400' : 'text-slate-700'}`}>\n          {transaction.name || '-'}\n        </span>\n\n        {/* Memo */}\n        <span className={`flex-1 truncate ${isTagged ? 'line-through text-slate-400' : 'text-slate-500'}`}>\n          {transaction.memo || transaction.transactionType}\n        </span>\n\n        {/* Tag badge */}\n        {isTagged && (\n          <span className=\"bg-amber-200 text-amber-800 text-xs px-2 py-0.5 rounded-full flex-shrink-0\">\n            {tag.subAccount}\n          </span>\n        )}\n\n        {/* Amount */}\n        <span className={`font-mono text-right w-24 flex-shrink-0\n          ${isTagged ? 'line-through text-slate-400' : transaction.amount < 0 ? 'text-red-600' : 'text-slate-700'}\n        `}>\n          {formatCurrency(transaction.amount)}\n        </span>\n\n        {/* Tag/Untag button */}\n        {isTagged ? (\n          <button\n            onClick={handleUntag}\n            className=\"text-xs text-red-600 hover:text-red-800 px-2 py-1 rounded hover:bg-red-50 flex-shrink-0\"\n          >\n            Untag\n          </button>\n        ) : (\n          <button\n            onClick={(e) => {\n              e.stopPropagation();\n              setShowTagModal(true);\n            }}\n            className=\"text-xs text-blue-600 hover:text-blue-800 px-2 py-1 rounded hover:bg-blue-50 flex-shrink-0\"\n          >\n            Tag\n          </button>\n        )}\n      </div>\n\n      {/* Tag Modal */}\n      {showTagModal && (\n        <TagModal\n          transaction={transaction}\n          onClose={() => setShowTagModal(false)}\n        />\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;;;AANA;;;;;AAYO,SAAS,eAAe,EAAE,WAAW,EAAuB;;IACjE,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,wJAAK;IACjC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yLAAQ,EAAC;IAEjD,MAAM,MAAM,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC;IACtC,MAAM,WAAW,CAAC,CAAC;IAEnB,MAAM,cAAc,CAAC;QACnB,EAAE,eAAe;QACjB,SAAS;YAAE,MAAM;YAAqB,SAAS,YAAY,EAAE;QAAC;IAChE;IAEA,MAAM,aAAa,CAAC;QAClB,MAAM,CAAC,OAAO,IAAI,GAAG,QAAQ,KAAK,CAAC;QACnC,OAAO,GAAG,MAAM,CAAC,EAAE,KAAK;IAC1B;IAEA,qBACE;;0BACE,6MAAC;gBACC,WAAW,CAAC;;UAEV,EAAE,WAAW,2BAA2B,6BAA6B;QACvE,CAAC;;kCAGD,6MAAC;wBAAK,WAAU;kCACb,WAAW,YAAY,eAAe;;;;;;kCAIzC,6MAAC;wBAAK,WAAW,CAAC,wCAAwC,EAAE,WAAW,gCAAgC,kBAAkB;kCACtH,YAAY,IAAI,IAAI;;;;;;kCAIvB,6MAAC;wBAAK,WAAW,CAAC,gBAAgB,EAAE,WAAW,gCAAgC,kBAAkB;kCAC9F,YAAY,IAAI,IAAI,YAAY,eAAe;;;;;;oBAIjD,0BACC,6MAAC;wBAAK,WAAU;kCACb,IAAI,UAAU;;;;;;kCAKnB,6MAAC;wBAAK,WAAW,CAAC;UAChB,EAAE,WAAW,gCAAgC,YAAY,MAAM,GAAG,IAAI,iBAAiB,iBAAiB;QAC1G,CAAC;kCACE,IAAA,4JAAc,EAAC,YAAY,MAAM;;;;;;oBAInC,yBACC,6MAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;6CAID,6MAAC;wBACC,SAAS,CAAC;4BACR,EAAE,eAAe;4BACjB,gBAAgB;wBAClB;wBACA,WAAU;kCACX;;;;;;;;;;;;YAOJ,8BACC,6MAAC,wKAAQ;gBACP,aAAa;gBACb,SAAS,IAAM,gBAAgB;;;;;;;;AAKzC;GApFgB;;QACc,wJAAK;;;KADnB"}},
    {"offset": {"line": 720, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/pnl/PLRow.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { PLRow as PLRowType, Transaction } from '@/types';\nimport { ChevronIcon } from '@/components/ui/ChevronIcon';\nimport { formatCurrency, formatMonth } from '@/lib/csvParser';\nimport { getAccountTransactions, groupTransactionsByMonth, calculateMonthlyAmounts } from '@/lib/calculations';\nimport { TransactionRow } from './TransactionRow';\n\ninterface PLRowProps {\n  row: PLRowType;\n  months: string[];\n  depth?: number;\n  isChild?: boolean;\n}\n\nexport function PLRow({ row, months, depth = 0, isChild = false }: PLRowProps) {\n  const { state, dispatch } = usePL();\n  const { expandedAccounts, expandedMonths, transactions, accounts, tags } = state;\n\n  const isExpanded = expandedAccounts.has(row.accountCode);\n  const hasChildren = row.account.children.length > 0;\n  const hasTransactions = row.transactionCount > 0;\n  const isExpandable = hasChildren || hasTransactions;\n\n  // Get child rows if expanded\n  const childRows = useMemo(() => {\n    if (!isExpanded || !hasChildren) return [];\n\n    return row.account.children\n      .map(childCode => {\n        const childAccount = accounts.get(childCode);\n        if (!childAccount) return null;\n\n        const { monthlyAmounts, ytdTotal, transactionCount } = calculateMonthlyAmounts(\n          childCode, transactions, accounts, months, tags\n        );\n\n        if (ytdTotal === 0 && transactionCount === 0) return null;\n\n        return {\n          accountCode: childCode,\n          account: childAccount,\n          monthlyAmounts,\n          ytdTotal,\n          transactionCount\n        } as PLRowType;\n      })\n      .filter((r): r is PLRowType => r !== null);\n  }, [isExpanded, hasChildren, row.account.children, accounts, transactions, months, tags]);\n\n  // Get transactions grouped by month if expanded (only for leaf nodes)\n  const transactionsByMonth = useMemo(() => {\n    if (!isExpanded || hasChildren) return {};\n\n    const txns = getAccountTransactions(row.accountCode, transactions, accounts, tags);\n    return groupTransactionsByMonth(txns);\n  }, [isExpanded, hasChildren, row.accountCode, transactions, accounts, tags]);\n\n  const handleToggle = () => {\n    if (isExpandable) {\n      dispatch({ type: 'TOGGLE_ACCOUNT', payload: row.accountCode });\n    }\n  };\n\n  const handleMonthToggle = (month: string) => {\n    const key = `${row.accountCode}-${month}`;\n    dispatch({ type: 'TOGGLE_MONTH', payload: key });\n  };\n\n  const isMonthExpanded = (month: string) => {\n    return expandedMonths.has(`${row.accountCode}-${month}`);\n  };\n\n  const indentPadding = depth * 20;\n\n  return (\n    <>\n      {/* Main account row */}\n      <tr\n        className={`\n          ${isChild ? 'bg-slate-50/50' : 'bg-white'}\n          ${isExpandable ? 'cursor-pointer hover:bg-slate-100' : ''}\n          border-b border-slate-100\n        `}\n        onClick={handleToggle}\n      >\n        {/* Account name column */}\n        <td\n          className=\"sticky left-0 bg-inherit px-3 py-2 font-medium text-slate-900 whitespace-nowrap z-10\"\n          style={{ paddingLeft: `${12 + indentPadding}px` }}\n        >\n          <div className=\"flex items-center gap-2\">\n            {isExpandable ? (\n              <ChevronIcon expanded={isExpanded} className=\"text-slate-400 flex-shrink-0\" />\n            ) : (\n              <span className=\"w-4\" />\n            )}\n            <span className={depth > 0 ? 'text-sm' : ''}>\n              {row.account.name}\n            </span>\n          </div>\n        </td>\n\n        {/* Monthly amounts */}\n        {months.map(month => (\n          <td\n            key={month}\n            className={`px-3 py-2 text-right font-mono text-sm whitespace-nowrap\n              ${row.monthlyAmounts[month] < 0 ? 'text-red-600' : 'text-slate-700'}\n            `}\n          >\n            {row.monthlyAmounts[month] !== 0 ? formatCurrency(row.monthlyAmounts[month]) : '-'}\n          </td>\n        ))}\n\n        {/* YTD Total */}\n        <td\n          className={`px-3 py-2 text-right font-mono text-sm font-semibold whitespace-nowrap\n            ${row.ytdTotal < 0 ? 'text-red-600' : 'text-slate-900'}\n          `}\n        >\n          {formatCurrency(row.ytdTotal)}\n        </td>\n      </tr>\n\n      {/* Child account rows */}\n      {isExpanded && childRows.map(childRow => (\n        <PLRow\n          key={childRow.accountCode}\n          row={childRow}\n          months={months}\n          depth={depth + 1}\n          isChild\n        />\n      ))}\n\n      {/* Transaction month groups (for leaf nodes) */}\n      {isExpanded && !hasChildren && Object.keys(transactionsByMonth).length > 0 && (\n        <>\n          {months.filter(m => transactionsByMonth[m]?.length > 0).map(month => {\n            const monthTxns = transactionsByMonth[month] || [];\n            const monthExpanded = isMonthExpanded(month);\n\n            return (\n              <tr key={`${row.accountCode}-${month}-group`} className=\"bg-slate-50\">\n                <td\n                  colSpan={months.length + 2}\n                  className=\"px-3 py-1\"\n                  style={{ paddingLeft: `${32 + indentPadding}px` }}\n                >\n                  <div\n                    className=\"flex items-center gap-2 text-sm text-slate-600 cursor-pointer hover:text-slate-900\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      handleMonthToggle(month);\n                    }}\n                  >\n                    <ChevronIcon expanded={monthExpanded} className=\"text-slate-400\" />\n                    <span className=\"font-medium\">{formatMonth(month)}</span>\n                    <span className=\"text-slate-400\">({monthTxns.length} transactions)</span>\n                    <span className=\"ml-auto font-mono\">\n                      {formatCurrency(monthTxns.reduce((sum, t) => sum + t.amount, 0))}\n                    </span>\n                  </div>\n\n                  {/* Individual transactions */}\n                  {monthExpanded && (\n                    <div className=\"mt-2 space-y-1 pb-2\">\n                      {monthTxns.map(txn => (\n                        <TransactionRow key={txn.id} transaction={txn} />\n                      ))}\n                    </div>\n                  )}\n                </td>\n              </tr>\n            );\n          })}\n        </>\n      )}\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1007, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/pnl/PLSection.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { PLSection as PLSectionType, PLRow as PLRowType } from '@/types';\nimport { usePL } from '@/context/PLContext';\nimport { buildPLRows, calculateSectionMonthlyTotal } from '@/lib/calculations';\nimport { formatCurrency, formatMonth } from '@/lib/csvParser';\nimport { PLRow } from './PLRow';\n\ninterface PLSectionProps {\n  section: PLSectionType;\n  title: string;\n  colorClass: string;\n}\n\nexport function PLSection({ section, title, colorClass }: PLSectionProps) {\n  const { state } = usePL();\n  const { transactions, accounts, months, tags } = state;\n\n  const rows = useMemo(() => {\n    if (transactions.length === 0) return [];\n    return buildPLRows(section, transactions, accounts, months, tags);\n  }, [section, transactions, accounts, months, tags]);\n\n  const sectionTotals = useMemo(() => {\n    const totals: Record<string, number> = {};\n    let ytd = 0;\n\n    months.forEach(month => {\n      const total = calculateSectionMonthlyTotal(section, transactions, accounts, month, tags);\n      totals[month] = total;\n      ytd += total;\n    });\n\n    return { monthly: totals, ytd };\n  }, [section, transactions, accounts, months, tags]);\n\n  if (rows.length === 0) return null;\n\n  return (\n    <div className=\"mb-6\">\n      {/* Section Header */}\n      <div className={`flex items-center gap-3 mb-2`}>\n        <div className={`w-1 h-6 rounded ${colorClass}`} />\n        <h2 className=\"text-lg font-semibold text-slate-900\">{title}</h2>\n      </div>\n\n      {/* Table */}\n      <div className=\"overflow-x-auto border border-slate-200 rounded-lg\">\n        <table className=\"w-full min-w-max\">\n          <thead>\n            <tr className=\"bg-slate-50 border-b border-slate-200\">\n              <th className=\"sticky left-0 bg-slate-50 px-3 py-2 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider w-64 z-10\">\n                Account\n              </th>\n              {months.map(month => (\n                <th\n                  key={month}\n                  className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-24\"\n                >\n                  {formatMonth(month)}\n                </th>\n              ))}\n              <th className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-28 bg-slate-100\">\n                YTD Total\n              </th>\n            </tr>\n          </thead>\n          <tbody>\n            {rows.map(row => (\n              <PLRow key={row.accountCode} row={row} months={months} />\n            ))}\n\n            {/* Section Total Row */}\n            <tr className={`${colorClass.replace('bg-', 'bg-opacity-10 bg-')} border-t-2 border-slate-300`}>\n              <td className=\"sticky left-0 bg-inherit px-3 py-2 font-bold text-slate-900\">\n                Total {title}\n              </td>\n              {months.map(month => (\n                <td\n                  key={month}\n                  className={`px-3 py-2 text-right font-mono text-sm font-bold\n                    ${sectionTotals.monthly[month] < 0 ? 'text-red-600' : 'text-slate-900'}\n                  `}\n                >\n                  {formatCurrency(sectionTotals.monthly[month])}\n                </td>\n              ))}\n              <td\n                className={`px-3 py-2 text-right font-mono text-sm font-bold bg-slate-100\n                  ${sectionTotals.ytd < 0 ? 'text-red-600' : 'text-slate-900'}\n                `}\n              >\n                {formatCurrency(sectionTotals.ytd)}\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AACA;AACA;AACA;;;AAPA;;;;;;AAeO,SAAS,UAAU,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAkB;;IACtE,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wJAAK;IACvB,MAAM,EAAE,YAAY,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG;IAEjD,MAAM,OAAO,IAAA,wLAAO;mCAAC;YACnB,IAAI,aAAa,MAAM,KAAK,GAAG,OAAO,EAAE;YACxC,OAAO,IAAA,4JAAW,EAAC,SAAS,cAAc,UAAU,QAAQ;QAC9D;kCAAG;QAAC;QAAS;QAAc;QAAU;QAAQ;KAAK;IAElD,MAAM,gBAAgB,IAAA,wLAAO;4CAAC;YAC5B,MAAM,SAAiC,CAAC;YACxC,IAAI,MAAM;YAEV,OAAO,OAAO;oDAAC,CAAA;oBACb,MAAM,QAAQ,IAAA,6KAA4B,EAAC,SAAS,cAAc,UAAU,OAAO;oBACnF,MAAM,CAAC,MAAM,GAAG;oBAChB,OAAO;gBACT;;YAEA,OAAO;gBAAE,SAAS;gBAAQ;YAAI;QAChC;2CAAG;QAAC;QAAS;QAAc;QAAU;QAAQ;KAAK;IAElD,IAAI,KAAK,MAAM,KAAK,GAAG,OAAO;IAE9B,qBACE,6MAAC;QAAI,WAAU;;0BAEb,6MAAC;gBAAI,WAAW,CAAC,4BAA4B,CAAC;;kCAC5C,6MAAC;wBAAI,WAAW,CAAC,gBAAgB,EAAE,YAAY;;;;;;kCAC/C,6MAAC;wBAAG,WAAU;kCAAwC;;;;;;;;;;;;0BAIxD,6MAAC;gBAAI,WAAU;0BACb,cAAA,6MAAC;oBAAM,WAAU;;sCACf,6MAAC;sCACC,cAAA,6MAAC;gCAAG,WAAU;;kDACZ,6MAAC;wCAAG,WAAU;kDAAwH;;;;;;oCAGrI,OAAO,GAAG,CAAC,CAAA,sBACV,6MAAC;4CAEC,WAAU;sDAET,IAAA,yJAAW,EAAC;2CAHR;;;;;kDAMT,6MAAC;wCAAG,WAAU;kDAAuG;;;;;;;;;;;;;;;;;sCAKzH,6MAAC;;gCACE,KAAK,GAAG,CAAC,CAAA,oBACR,6MAAC,8JAAK;wCAAuB,KAAK;wCAAK,QAAQ;uCAAnC,IAAI,WAAW;;;;;8CAI7B,6MAAC;oCAAG,WAAW,GAAG,WAAW,OAAO,CAAC,OAAO,qBAAqB,4BAA4B,CAAC;;sDAC5F,6MAAC;4CAAG,WAAU;;gDAA8D;gDACnE;;;;;;;wCAER,OAAO,GAAG,CAAC,CAAA,sBACV,6MAAC;gDAEC,WAAW,CAAC;oBACV,EAAE,cAAc,OAAO,CAAC,MAAM,GAAG,IAAI,iBAAiB,iBAAiB;kBACzE,CAAC;0DAEA,IAAA,4JAAc,EAAC,cAAc,OAAO,CAAC,MAAM;+CALvC;;;;;sDAQT,6MAAC;4CACC,WAAW,CAAC;kBACV,EAAE,cAAc,GAAG,GAAG,IAAI,iBAAiB,iBAAiB;gBAC9D,CAAC;sDAEA,IAAA,4JAAc,EAAC,cAAc,GAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQjD;GAtFgB;;QACI,wJAAK;;;KADT"}},
    {"offset": {"line": 1225, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/pnl/GrossProfitRow.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { calculateSectionMonthlyTotal } from '@/lib/calculations';\nimport { formatCurrency, formatMonth } from '@/lib/csvParser';\n\ninterface GrossProfitRowProps {\n  type: 'grossProfit' | 'netIncome';\n}\n\nexport function GrossProfitRow({ type }: GrossProfitRowProps) {\n  const { state } = usePL();\n  const { transactions, accounts, months, tags } = state;\n\n  const calculations = useMemo(() => {\n    const revenue: Record<string, number> = {};\n    const cogs: Record<string, number> = {};\n    const costOfSales: Record<string, number> = {};\n    const opex: Record<string, number> = {};\n    const other: Record<string, number> = {};\n\n    let revenueYtd = 0, cogsYtd = 0, cosYtd = 0, opexYtd = 0, otherYtd = 0;\n\n    months.forEach(month => {\n      revenue[month] = calculateSectionMonthlyTotal('revenue', transactions, accounts, month, tags);\n      cogs[month] = calculateSectionMonthlyTotal('cogs', transactions, accounts, month, tags);\n      costOfSales[month] = calculateSectionMonthlyTotal('costOfSales', transactions, accounts, month, tags);\n      opex[month] = calculateSectionMonthlyTotal('operatingExpenses', transactions, accounts, month, tags);\n      other[month] = calculateSectionMonthlyTotal('otherIncome', transactions, accounts, month, tags);\n\n      revenueYtd += revenue[month];\n      cogsYtd += cogs[month];\n      cosYtd += costOfSales[month];\n      opexYtd += opex[month];\n      otherYtd += other[month];\n    });\n\n    const grossProfit: Record<string, number> = {};\n    const netIncome: Record<string, number> = {};\n    let gpYtd = 0, niYtd = 0;\n\n    months.forEach(month => {\n      grossProfit[month] = revenue[month] - cogs[month] - costOfSales[month];\n      netIncome[month] = grossProfit[month] - opex[month] + other[month];\n      gpYtd += grossProfit[month];\n      niYtd += netIncome[month];\n    });\n\n    return {\n      grossProfit: { monthly: grossProfit, ytd: gpYtd },\n      netIncome: { monthly: netIncome, ytd: niYtd },\n      revenue: { monthly: revenue, ytd: revenueYtd }\n    };\n  }, [transactions, accounts, months, tags]);\n\n  if (transactions.length === 0) return null;\n\n  const data = type === 'grossProfit' ? calculations.grossProfit : calculations.netIncome;\n  const label = type === 'grossProfit' ? 'Gross Profit' : 'Net Income';\n  const bgColor = type === 'grossProfit' ? 'bg-blue-50' : 'bg-green-50';\n  const borderColor = type === 'grossProfit' ? 'border-blue-200' : 'border-green-200';\n\n  // Calculate margin\n  const margin = calculations.revenue.ytd !== 0\n    ? (data.ytd / calculations.revenue.ytd) * 100\n    : 0;\n\n  return (\n    <div className={`mb-6 overflow-x-auto border ${borderColor} rounded-lg`}>\n      <table className=\"w-full min-w-max\">\n        <thead>\n          <tr className={`${bgColor} border-b ${borderColor}`}>\n            <th className=\"sticky left-0 bg-inherit px-3 py-2 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider w-64 z-10\">\n              &nbsp;\n            </th>\n            {months.map(month => (\n              <th\n                key={month}\n                className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-24\"\n              >\n                {formatMonth(month)}\n              </th>\n            ))}\n            <th className=\"px-3 py-2 text-right text-xs font-semibold text-slate-600 uppercase tracking-wider w-28\">\n              YTD Total\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr className={bgColor}>\n            <td className=\"sticky left-0 bg-inherit px-3 py-3 font-bold text-lg text-slate-900\">\n              {label}\n              <span className=\"ml-2 text-sm font-normal text-slate-500\">\n                ({margin.toFixed(1)}% margin)\n              </span>\n            </td>\n            {months.map(month => (\n              <td\n                key={month}\n                className={`px-3 py-3 text-right font-mono font-bold text-lg\n                  ${data.monthly[month] < 0 ? 'text-red-600' : 'text-slate-900'}\n                `}\n              >\n                {formatCurrency(data.monthly[month])}\n              </td>\n            ))}\n            <td\n              className={`px-3 py-3 text-right font-mono font-bold text-lg\n                ${data.ytd < 0 ? 'text-red-600' : 'text-slate-900'}\n              `}\n            >\n              {formatCurrency(data.ytd)}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1434, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/tagging/ExcludedSection.tsx"],"sourcesContent":["'use client';\n\nimport { useMemo, useState } from 'react';\nimport { usePL } from '@/context/PLContext';\nimport { formatCurrency } from '@/lib/csvParser';\nimport { ChevronIcon } from '@/components/ui/ChevronIcon';\nimport { Exclusion } from '@/types';\n\ninterface GroupedExclusions {\n  [category: string]: {\n    exclusions: Exclusion[];\n    total: number;\n    justification: string;\n  };\n}\n\nexport function ExcludedSection() {\n  const { state } = usePL();\n  const [isMainExpanded, setIsMainExpanded] = useState(false);\n  const [expandedCategories, setExpandedCategories] = useState<Set<string>>(new Set());\n\n  const grouped = useMemo((): GroupedExclusions => {\n    const result: GroupedExclusions = {};\n\n    for (const exclusion of state.exclusions) {\n      if (!result[exclusion.category]) {\n        result[exclusion.category] = {\n          exclusions: [],\n          total: 0,\n          justification: exclusion.justification\n        };\n      }\n      result[exclusion.category].exclusions.push(exclusion);\n      result[exclusion.category].total += exclusion.amount;\n    }\n\n    return result;\n  }, [state.exclusions]);\n\n  const totalExcluded = useMemo(() => {\n    return state.exclusions.reduce((sum, e) => sum + e.amount, 0);\n  }, [state.exclusions]);\n\n  const categories = Object.keys(grouped).sort();\n\n  if (state.exclusions.length === 0) return null;\n\n  const toggleCategory = (category: string) => {\n    const newExpanded = new Set(expandedCategories);\n    if (newExpanded.has(category)) {\n      newExpanded.delete(category);\n    } else {\n      newExpanded.add(category);\n    }\n    setExpandedCategories(newExpanded);\n  };\n\n  // Category colors\n  const getCategoryColor = (category: string): string => {\n    const colors: Record<string, string> = {\n      'Personal': 'bg-purple-500',\n      'Discretionary': 'bg-purple-400',\n      'Owner Travel': 'bg-blue-500',\n      'Owner Education': 'bg-blue-400',\n      'Owner Tools': 'bg-blue-300',\n      'Owner Expense': 'bg-blue-600',\n      'Legal': 'bg-red-500',\n      'Legal/Tax': 'bg-red-400',\n      'One-Time Project': 'bg-amber-500',\n      'One-Time COGS': 'bg-amber-400',\n      'Terminated Agency': 'bg-orange-500',\n      'Terminated Contractor': 'bg-orange-400',\n      'Terminated Service': 'bg-orange-300',\n      'M&A Process': 'bg-slate-500',\n    };\n    return colors[category] || 'bg-slate-400';\n  };\n\n  return (\n    <div className=\"mt-8 pt-6 border-t-2 border-slate-300\">\n      {/* Main Header - Collapsible */}\n      <div\n        className=\"flex items-center gap-3 mb-4 cursor-pointer hover:opacity-80\"\n        onClick={() => setIsMainExpanded(!isMainExpanded)}\n      >\n        <ChevronIcon expanded={isMainExpanded} className=\"text-slate-400\" />\n        <div className=\"w-1 h-6 rounded bg-amber-500\" />\n        <h2 className=\"text-lg font-semibold text-slate-900\">Exclusions</h2>\n        <span className=\"text-sm text-slate-500\">\n          ({state.exclusions.length} items excluded from P&L)\n        </span>\n        <span className=\"ml-auto font-mono font-semibold text-slate-700\">\n          {formatCurrency(totalExcluded)}\n        </span>\n      </div>\n\n      {isMainExpanded && (\n        <div className=\"space-y-3 pl-6\">\n          {/* Summary by category */}\n          <p className=\"text-sm text-slate-600 mb-4\">\n            The following expenses have been excluded as non-recurring or owner-related items that would not transfer to a buyer.\n          </p>\n\n          {categories.map(category => {\n            const data = grouped[category];\n            const isExpanded = expandedCategories.has(category);\n\n            return (\n              <div key={category} className=\"border border-slate-200 rounded-lg overflow-hidden\">\n                {/* Category Header */}\n                <div\n                  className=\"flex items-center gap-3 px-4 py-3 bg-slate-50 cursor-pointer hover:bg-slate-100\"\n                  onClick={() => toggleCategory(category)}\n                >\n                  <ChevronIcon expanded={isExpanded} className=\"text-slate-400\" />\n                  <div className={`w-2 h-2 rounded-full ${getCategoryColor(category)}`} />\n                  <span className=\"font-semibold text-slate-900\">{category}</span>\n                  <span className=\"text-sm text-slate-500\">\n                    ({data.exclusions.length} items)\n                  </span>\n                  <span className=\"ml-auto text-xs text-slate-500 max-w-md truncate\">\n                    {data.justification}\n                  </span>\n                  <span className=\"font-mono font-semibold text-slate-700 ml-4\">\n                    {formatCurrency(data.total)}\n                  </span>\n                </div>\n\n                {/* Transactions */}\n                {isExpanded && (\n                  <div className=\"divide-y divide-slate-100\">\n                    {data.exclusions.map((exc, idx) => (\n                      <div\n                        key={`${exc.date}-${exc.amount}-${idx}`}\n                        className=\"flex items-center gap-4 px-6 py-2 bg-white text-sm hover:bg-slate-50\"\n                      >\n                        <span className=\"text-slate-400 w-24\">{exc.date}</span>\n                        <span className=\"text-slate-700 flex-1 truncate\">\n                          {exc.vendor || exc.memo?.substring(0, 40) || 'Unknown'}\n                        </span>\n                        <span className=\"text-slate-500 text-xs w-32 truncate\">\n                          {exc.account.replace(/^\\d{4}\\s+/, '')}\n                        </span>\n                        <span className=\"font-mono text-slate-600 w-24 text-right\">\n                          {formatCurrency(exc.amount)}\n                        </span>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1731, "column": 0}, "map": {"version":3,"sources":["file:///Users/robertonoel/Desktop/repos/spicy-pnl/src/components/pnl/PLViewer.tsx"],"sourcesContent":["'use client';\n\nimport { usePL } from '@/context/PLContext';\nimport { SummaryCards } from './SummaryCards';\nimport { PLSection } from './PLSection';\nimport { GrossProfitRow } from './GrossProfitRow';\nimport { ExcludedSection } from '@/components/tagging/ExcludedSection';\n\nexport function PLViewer() {\n  const { state } = usePL();\n\n  if (state.loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"flex items-center gap-3 text-slate-500\">\n          <svg className=\"animate-spin h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n          </svg>\n          <span>Loading financial data...</span>\n        </div>\n      </div>\n    );\n  }\n\n  if (state.error) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"text-red-600 bg-red-50 px-6 py-4 rounded-lg border border-red-200\">\n          <strong>Error:</strong> {state.error}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Summary Cards */}\n      <SummaryCards />\n\n      {/* Revenue Section */}\n      <PLSection\n        section=\"revenue\"\n        title=\"Revenue\"\n        colorClass=\"bg-emerald-500\"\n      />\n\n      {/* COGS Section */}\n      <PLSection\n        section=\"cogs\"\n        title=\"Cost of Goods Sold\"\n        colorClass=\"bg-orange-500\"\n      />\n\n      {/* Cost of Sales Section */}\n      <PLSection\n        section=\"costOfSales\"\n        title=\"Cost of Sales\"\n        colorClass=\"bg-amber-500\"\n      />\n\n      {/* Gross Profit */}\n      <GrossProfitRow type=\"grossProfit\" />\n\n      {/* Operating Expenses */}\n      <PLSection\n        section=\"operatingExpenses\"\n        title=\"Operating Expenses\"\n        colorClass=\"bg-red-500\"\n      />\n\n      {/* Net Income */}\n      <GrossProfitRow type=\"netIncome\" />\n\n      {/* Excluded/Tagged Section */}\n      <ExcludedSection />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;;;AANA;;;;;;AAQO,SAAS;;IACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,wJAAK;IAEvB,IAAI,MAAM,OAAO,EAAE;QACjB,qBACE,6MAAC;YAAI,WAAU;sBACb,cAAA,6MAAC;gBAAI,WAAU;;kCACb,6MAAC;wBAAI,WAAU;wBAAuB,OAAM;wBAA6B,MAAK;wBAAO,SAAQ;;0CAC3F,6MAAC;gCAAO,WAAU;gCAAa,IAAG;gCAAK,IAAG;gCAAK,GAAE;gCAAK,QAAO;gCAAe,aAAY;;;;;;0CACxF,6MAAC;gCAAK,WAAU;gCAAa,MAAK;gCAAe,GAAE;;;;;;;;;;;;kCAErD,6MAAC;kCAAK;;;;;;;;;;;;;;;;;IAId;IAEA,IAAI,MAAM,KAAK,EAAE;QACf,qBACE,6MAAC;YAAI,WAAU;sBACb,cAAA,6MAAC;gBAAI,WAAU;;kCACb,6MAAC;kCAAO;;;;;;oBAAe;oBAAE,MAAM,KAAK;;;;;;;;;;;;IAI5C;IAEA,qBACE,6MAAC;;0BAEC,6MAAC,4KAAY;;;;;0BAGb,6MAAC,sKAAS;gBACR,SAAQ;gBACR,OAAM;gBACN,YAAW;;;;;;0BAIb,6MAAC,sKAAS;gBACR,SAAQ;gBACR,OAAM;gBACN,YAAW;;;;;;0BAIb,6MAAC,sKAAS;gBACR,SAAQ;gBACR,OAAM;gBACN,YAAW;;;;;;0BAIb,6MAAC,gLAAc;gBAAC,MAAK;;;;;;0BAGrB,6MAAC,sKAAS;gBACR,SAAQ;gBACR,OAAM;gBACN,YAAW;;;;;;0BAIb,6MAAC,gLAAc;gBAAC,MAAK;;;;;;0BAGrB,6MAAC,sLAAe;;;;;;;;;;;AAGtB;GAtEgB;;QACI,wJAAK;;;KADT"}}]
}