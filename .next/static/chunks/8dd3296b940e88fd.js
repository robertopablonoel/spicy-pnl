(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50400,91478,e=>{"use strict";var t=e.i(69365),a=e.i(49604);function n(e){if(!e||""===e.trim())return 0;let t=parseFloat(e.replace(/[$,"]/g,""));return isNaN(t)?0:t}function r(e){let t=parseInt(e,10);return t>=4e3&&t<4100?"revenue":t>=5e3&&t<6e3?"cogs":t>=6e3&&t<6100?"costOfSales":t>=6100&&t<7e3?"operatingExpenses":t>=7e3&&t<8e3?"otherIncome":"operatingExpenses"}function o(e){let t=e.split(":");return t[t.length-1].trim().replace(/^\d{4}\s+/,"")}function l(e){let t=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n").split("\n"),a=[],l=new Map,c=new Set,s=null,i=null;for(let e=5;e<t.length;e++){let r=t[e].trim();if(!r||",,,,,,,,,"===r||r.startsWith("Total for"))continue;let o=r.match(/^(\d{4}\s+[^,]+),,,,,,,,,$/);if(o){i=function(e){let t=e.match(/^(\d{4})/);return t?t[1]:""}(s=o[1].trim());continue}if(!i||!function(e){let t=parseInt(e,10);return t>=4e3&&t<8e3}(i))continue;let l=function(e){let t=[],a="",n=!1;for(let r=0;r<e.length;r++){let o=e[r];'"'===o?n=!n:","!==o||n?a+=o:(t.push(a.trim()),a="")}return t.push(a.trim()),t}(r),c=l[1];if(!c||!/^\d{2}\/\d{2}\/\d{4}$/.test(c))continue;let u=s,d={transactionDate:c,transactionType:l[2]||"",num:l[3]||"",name:l[4]||"",classFullName:l[5]||"",memo:l[6]||"",accountFullName:u,amount:n(l[8]),balance:n(l[9])};a.push(d)}return{transactions:a.map((e,t)=>{let a,n,{code:s,parentCode:i}=function(e){if(!e)return{code:"",parentCode:null};let t=e.split(":");if(1===t.length){let t=e.match(/^(\d{4})/);return{code:t?t[1]:"",parentCode:null}}let a=t[t.length-1].trim(),n=t[0].trim(),r=a.match(/^(\d{4})/),o=n.match(/^(\d{4})/);return{code:r?r[1]:"",parentCode:o?o[1]:null}}(e.accountFullName),u=function(e){if(!e)return"";let t=e.split("/");if(3!==t.length)return"";let a=t[0].padStart(2,"0"),n=t[2];return`${n}-${a}`}(e.transactionDate);if(u&&c.add(u),s&&!l.has(s)&&l.set(s,{code:s,name:o(e.accountFullName),fullName:e.accountFullName,parentCode:i,section:r(s),children:[],depth:+!!i}),i&&s){let t=l.get(i);if(t&&!t.children.includes(s))t.children.push(s);else if(!t){let t=e.accountFullName.split(":")[0].trim();l.set(i,{code:i,name:o(t),fullName:t,parentCode:null,section:r(i),children:[s],depth:0})}}return{...e,id:(a=e.transactionDate.replace(/\//g,"-"),n=e.accountFullName.substring(0,20).replace(/[^a-zA-Z0-9]/g,""),`txn-${a}-${n}-${t}`),month:u,accountCode:s,parentAccountCode:i}}),accounts:l,months:Array.from(c).sort()}}function c(e){let t=Math.abs(e),a=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);return e<0?`(${a})`:a}function s(e){let[t,a]=e.split("-");return new Date(parseInt(t),parseInt(a)-1).toLocaleDateString("en-US",{month:"short",year:"2-digit"})}e.s(["formatCurrency",()=>c,"formatMonth",()=>s,"parseCSV",()=>l],91478);let i={transactions:[],accounts:new Map,tags:{},tagConfig:{personal:["Owner's Draw","Personal Meals","Personal Travel","Personal Shopping"],nonRecurring:["One-time Setup","Settlement","Equipment Purchase","Legal Settlement"]},expandedAccounts:new Set,expandedMonths:new Set,months:[],loading:!0,error:null};function u(e,t){switch(t.type){case"SET_LOADING":return{...e,loading:t.payload};case"SET_ERROR":return{...e,error:t.payload,loading:!1};case"LOAD_DATA":return{...e,transactions:t.payload.transactions,accounts:t.payload.accounts,months:t.payload.months,loading:!1,error:null};case"TOGGLE_ACCOUNT":{let a=new Set(e.expandedAccounts);return a.has(t.payload)?a.delete(t.payload):a.add(t.payload),{...e,expandedAccounts:a}}case"TOGGLE_MONTH":{let a=new Set(e.expandedMonths);return a.has(t.payload)?a.delete(t.payload):a.add(t.payload),{...e,expandedMonths:a}}case"TAG_TRANSACTION":return{...e,tags:{...e.tags,[t.payload.transactionId]:t.payload.tag}};case"UNTAG_TRANSACTION":{let a={...e.tags};return delete a[t.payload],{...e,tags:a}}case"ADD_SUB_ACCOUNT":{let{category:a,name:n}=t.payload;if(e.tagConfig[a].includes(n))return e;return{...e,tagConfig:{...e.tagConfig,[a]:[...e.tagConfig[a],n]}}}case"LOAD_TAGS":return{...e,tags:t.payload.tags,tagConfig:t.payload.config};default:return e}}let d=(0,a.createContext)(null),p="pnl-tags",g="pnl-tag-config";function f({children:e}){let[n,r]=(0,a.useReducer)(u,i);return(0,a.useEffect)(()=>{!async function(){try{r({type:"SET_LOADING",payload:!0});let e=await fetch("/all-txn.csv");if(!e.ok)throw Error("Failed to load CSV file");let t=await e.text(),{transactions:a,accounts:n,months:o}=l(t);r({type:"LOAD_DATA",payload:{transactions:a,accounts:n,months:o}})}catch(e){r({type:"SET_ERROR",payload:e instanceof Error?e.message:"Unknown error"})}}()},[]),(0,a.useEffect)(()=>{try{let e=localStorage.getItem(p),t=localStorage.getItem(g);(e||t)&&r({type:"LOAD_TAGS",payload:{tags:e?JSON.parse(e):{},config:t?JSON.parse(t):i.tagConfig}})}catch(e){console.error("Failed to load tags from localStorage:",e)}},[]),(0,a.useEffect)(()=>{if(!n.loading)try{localStorage.setItem(p,JSON.stringify(n.tags)),localStorage.setItem(g,JSON.stringify(n.tagConfig))}catch(e){console.error("Failed to save tags to localStorage:",e)}},[n.tags,n.tagConfig,n.loading]),(0,t.jsx)(d.Provider,{value:{state:n,dispatch:r},children:e})}function m(){let e=(0,a.useContext)(d);if(!e)throw Error("usePL must be used within a PLProvider");return e}e.s(["PLProvider",()=>f,"usePL",()=>m],50400)}]);